package br.gov.siscomex.portalunico.ccta.api;


import javax.validation.Valid;
import javax.validation.constraints.NotNull;
import javax.ws.rs.Consumes;
import javax.ws.rs.HeaderParam;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.QueryParam;
import javax.ws.rs.core.Response;

import io.swagger.annotations.Api;
import io.swagger.annotations.ApiOperation;
import io.swagger.annotations.ApiParam;
import io.swagger.annotations.ApiResponse;
import io.swagger.annotations.ApiResponses;

/**
 * Controle de Carga e Trânsito Importação - Modal Aéreo
 *
 * <p><h3 id=\"cct-importa-o\">CCT Importação</h3><a rel=\"noopener noreferrer\" target=\"_blank\" href=\"../en\"><img border=\"0\" alt=\"gb\" src=\"../images/icon_gb_64.png\" width=\"32\" height=\"16\">English</a><h4>Introdução</h4><p>Bem-vindo à Application Programming Interface (API) provisória de interação entre transportadores (Cias. Aéreas), agentes de carga, operadores de remessa postal/expressa, recintos aduaneiros e o novo Sistema de Controle de Carga e Trânsito (CCT Importação - Modal Aéreo). Trata-se de um conjunto de rotinas e padrões de programação para acesso a um aplicativo de software baseado nos padrões Web, que permitirá a manifestação e gestão do fluxo logístico de viagens e cargas dentro do Portal Único de Comércio Exterior.</p><p>A documentação a seguir descreve os serviços da versão atual do sistema, disponível no ambiente de validação do setor privado. Os demais serviços encontram-se em desenvolvimento. Não há, até o momento, versão disponível para uso em produção. O intuito da API é permitir que as empresas possam iniciar seus testes, preparando as adaptações necessárias em seus sistemas. As informações encaminhadas para os endpoints, neste momento, não terão valor legal, nem serão reaproveitadas em produção.</p><p>Nesta versão, todos os serviços listados devem ser acessados por empresas cadastradas como Transportador ou Agente de Carga, utilizando o perfil de acesso “TRANSPORT”. Os recintos aduaneiros devem utilizar os serviços disponibilizados pelo Sistema Recintos. Os operadores de remessa postal/expressa serão incluídos em versão futura.</p><p>Para a utilização dos serviços do CCT Importação – Modal Aéreo, a autenticação via certificação digital é obrigatória. Na seção “Introdução” da API do Portal Único de Comércio Exterior, podem ser encontradas as orientações gerais sobre os padrões de comunicação dos serviços, os procedimentos para autenticação e os códigos de resposta das requisições.</p><p>Os arquivos referentes à manifestação de viagens e cargas devem seguir o padrão Cargo XML da IATA (Associação Internacional de Transportes Aéreos). Para conhecimento dos elementos de dados, estrutura e formato do padrão XSD, deve-se buscar a informação no site da IATA (www.iata.org). Nesta API, serão detalhadas somente as informações solicitadas de forma diferente do padrão IATA.</p><p>Serão solicitados os arquivos XFFM, XFWB, XFZB e XFHL, a serem enviados pelos serviços abaixo, descritos em maiores detalhes nas suas respectivas seções desta API:</p><ul><li>Informar Viagem - XFFM (Flight Manifest)</li><li>Informar Conhecimento de Carga - XFWB (Freight Waybill)</li><li>Informar Conhecimento de Carga House - XFZB (House Air Waybill)</li><li>Informar Associação Master e House - XFHL (House Manifest)</li></ul><p>Os arquivos somente serão recebidos caso o XML esteja de acordo com o XSD da IATA. Os arquivos corretamente validados passarão à situação &quot;<em>Received</em>&quot; e receberão um número de protocolo associado ao recebimento desse arquivo, sendo encaminhados para processamento. Os arquivos que não forem validados pelo XSD da IATA terão situação &quot;<em>Rejected</em>&quot; e não receberão número de protocolo.</p><p>Após a validação do XSD, será realizado o processamento do conteúdo dos campos dos arquivos. Este processamento inclui verificações, tais como: se o campo foi informado vazio ou acima do tamanho permitido, se as informações constam no cadastro da Receita Federal (CPF, CNPJ), etc., com vistas à gravação do dado na base. Os arquivos corretamente processados passarão à situação &quot;<em>Processed</em>&quot;, e os que apresentarem algum tipo de erro passarão para &quot;<em>Rejected</em>&quot;.</p><p>A qualquer momento, a situação dos arquivos enviados pode ser consultada pelos seguintes serviços descritos nesta API:</p><ul><li>Consultar Situação de Arquivos por Data</li><li>Consultar Situação de Arquivos por Número de Protocolo</li></ul><p>Durante o processamento, haverá batimento do conteúdo dos dados com tabelas de domínio. Os domínios que estão sendo validados e que podem causar rejeição de arquivo referem-se a:</p><ul><li>Aeroportos (código com três posições) - IATA Airport Code (&#42;)</li><li>Companhia Aérea (número com três posições e código com duas posições) - IATA Airline Codes</li><li>Indicador de Parcialidade de carga numa viagem - IATA Code List 1.15</li><li>Moeda (código alfanumérico com três posições) - ISO 4217</li><li>Países (sigla com duas posições) – ISO 3166</li><li>Recinto Aduaneiro (código com sete posições) – site da Receita Federal do Brasil</li><li>Unidade de Medida (Peso) - rec20_Rev10e_2014.xls do site <a href=\"http://www.unece.org/uncefact/codelistrecs.html\">http://www.unece.org/uncefact/codelistrecs.html</a></li><li>Unidade de Medida (Volume) - IATA Code List 1.20</li><li>Voos - Código de voo com duas posições alfanuméricas referentes à Companhia Aérea e quatro posições numéricas referentes ao número do voo.</li></ul><p>(&#42;) Na versão atual, será aceita uma lista reduzida de aeroportos, informada no final desta seção. Em versão futura, a lista será ampliada para todos os aeroportos cadastrados.</p><p>A lista de campos a serem informados e a definição de se eles são obrigatórios ou opcionais seguirão, via de regra, os padrões estabelecidos pela IATA, passando pela validação do XSD. As exceções serão mencionadas explicitamente na descrição dos serviços na API, fazendo parte do processamento dos arquivos. Os tipos e tamanhos de campos também seguirão, via de regra, os padrões estabelecidos pela IATA e, quando não validados pelo XSD, serão verificados no processamento.</p><p>Serão processados os seguintes tipos de operação para os arquivos:</p><ul><li>XFFM – Creation</li><li>XFWB, XFZB, XFHL – Creation, Update e Deletion</li></ul><p>Os arquivos XFFM, XFWB, XFZB e XFHL podem ser enviados em qualquer ordem, desde que cumpram com os prazos estabelecidos pela Receita Federal do Brasil.</p><p>O escopo atual do projeto se encontra restrito a voos regulares. Voos não regulares serão objeto de versões futuras.</p><p>Os serviços de recebimento e consulta de arquivos, a princípio, não estarão disponíveis no horário de 1:00h às 3:00h, em virtude de parada programada dos sistemas de comércio exterior.</p><p>Lista de aeroportos aceitos na versão atual:</p><table><thead><tr><th>Sigla País</th><th>País</th><th>Código Aeroporto</th><th>Descrição Aeroporto</th></tr></thead><tbody><tr><td>AE</td><td>EMIRADOS ÁRABES UNIDOS</td><td>DXB</td><td>Dubai International Airport</td><td></td></tr><tr><td>AU</td><td>AUSTRÁLIA</td><td>CBR</td><td>Canberra Airport</td><td></td></tr><tr><td>AU</td><td>AUSTRÁLIA</td><td>SYD</td><td>Sydney Airport</td><td></td></tr><tr><td>AU</td><td>AUSTRÁLIA</td><td>MEL</td><td>Melbourne Airport</td><td></td></tr><tr><td>AR</td><td>ARGENTINA</td><td>CPC</td><td>San Martin Des Andes</td><td></td></tr><tr><td>AR</td><td>ARGENTINA</td><td>EZE</td><td>Ministro Pistarini International Airport</td><td></td></tr><tr><td>AR</td><td>ARGENTINA</td><td>IRJ</td><td>Capitan V A Almonacid Airport</td><td></td></tr><tr><td>AR</td><td>ARGENTINA</td><td>LUQ</td><td>Brigadier Mayor D Cesar Raul Ojeda Airport</td><td></td></tr><tr><td>AR</td><td>ARGENTINA</td><td>MDQ</td><td>Ástor Piazzola International Airport</td><td></td></tr><tr><td>AR</td><td>ARGENTINA</td><td>REL</td><td>Almirante Marco Andres Zar Airport</td><td></td></tr><tr><td>BE</td><td>BÉLGICA</td><td>ANR</td><td>Antwerp International Airport</td><td></td></tr><tr><td>BE</td><td>BÉLGICA</td><td>BRU</td><td>Brussels Airport</td><td></td></tr><tr><td>BR</td><td>BRASIL</td><td>AAG</td><td>Avelino Vieira Airport</td><td></td></tr><tr><td>BR</td><td>BRASIL</td><td>CGR</td><td>Campo Grande Airport</td><td></td></tr><tr><td>BR</td><td>BRASIL</td><td>CNF</td><td>Tancredo Neves International Airport</td><td></td></tr><tr><td>BR</td><td>BRASIL</td><td>CWB</td><td>Afonso Pena Airport</td><td></td></tr><tr><td>BR</td><td>BRASIL</td><td>FLB</td><td>Cangapara Airport</td><td></td></tr><tr><td>BR</td><td>BRASIL</td><td>GIG</td><td>Rio Galeao – Tom Jobim International Airport</td><td></td></tr><tr><td>BR</td><td>BRASIL</td><td>GRU</td><td>Guarulhos - Governador Andre Franco Montoro International Airport</td><td></td></tr><tr><td>BR</td><td>BRASIL</td><td>POA</td><td>Salgado Filho Airport</td><td></td></tr><tr><td>BR</td><td>BRASIL</td><td>VCP</td><td>Viracopos Airport</td><td></td></tr><tr><td>BR</td><td>BRASIL</td><td>VOT</td><td>Votuporanga Airport</td><td></td></tr><tr><td>CA</td><td>CANADÁ</td><td>YYZ</td><td>Toronto Pearson International Airport</td><td></td></tr><tr><td>CA</td><td>CANADÁ</td><td>YVR</td><td>Vancouver International Airport</td><td></td></tr><tr><td>CN</td><td>CHINA</td><td>SHA</td><td>Shanghai Hongqiao International Airport</td><td></td></tr><tr><td>CN</td><td>CHINA</td><td>NGB</td><td>Ningbo Lishe International Airport</td><td></td></tr><tr><td>CN</td><td>CHINA</td><td>PEK</td><td>Aeroporto Internacional de Pequim - Capital</td><td></td></tr><tr><td>DE</td><td>ALEMANHA</td><td>AGB</td><td>Augsburg Airport</td></tr><tr><td>DE</td><td>ALEMANHA</td><td>BBJ</td><td>Bitburg Airport</td></tr><tr><td>DE</td><td>ALEMANHA</td><td>BYU</td><td>Bayreuth Airport</td></tr><tr><td>DE</td><td>ALEMANHA</td><td>DTM</td><td>Dortmund Airport</td></tr><tr><td>DE</td><td>ALEMANHA</td><td>FRA</td><td>Frankfurt am Main Airport</td></tr><tr><td>DE</td><td>ALEMANHA</td><td>THF</td><td>Berlin-Tempelhof International Airport</td></tr><tr><td>ES</td><td>ESPANHA</td><td>MAD</td><td>Madrid-Barajas Airport</td></tr><tr><td>FR</td><td>FRANÇA</td><td>CDG</td><td>Charles de Gaulle Airport</td></tr><tr><td>FR</td><td>FRANÇA</td><td>ORY</td><td>Orly Airport</td></tr><tr><td>GB</td><td>REINO UNIDO</td><td>LHR</td><td>Heathrow Airport</td></tr><tr><td>HK</td><td>HONG KONG</td><td>HKG</td><td>Aeroporto Internacional de Hong Kong</td></tr><tr><td>IL</td><td>ISRAEL</td><td>TLV</td><td>Ben Gurion Airport</td></tr><tr><td>IT</td><td>ITÁLIA</td><td>FCO</td><td>Leonardo da Vinci-Fiumicino Airport</td></tr><tr><td>IT</td><td>ITÁLIA</td><td>LIN</td><td>Linate Airport</td></tr><tr><td>JP</td><td>JAPÃO</td><td>AKJ</td><td>Asahikawa Airport</td></tr><tr><td>JP</td><td>JAPÃO</td><td>KIX</td><td>Kansai International Airport</td></tr><tr><td>JP</td><td>JAPÃO</td><td>NGO</td><td>Chubu Centrair International Airport</td></tr><tr><td>JP</td><td>JAPÃO</td><td>NGS</td><td>Nagasaki Airport</td></tr><tr><td>JP</td><td>JAPÃO</td><td>NRT</td><td>Narita International Airport</td></tr><tr><td>JP</td><td>JAPÃO</td><td>UKY</td><td>Kyoto</td></tr><tr><td>MX</td><td>MÉXICO</td><td>MEX</td><td>Mexico City International Airport</td></tr><tr><td>NL</td><td>PAÍSES BAIXOS</td><td>AMS</td><td>Amsterdam Airport Schiphol</td></tr><tr><td>NL</td><td>PAÍSES BAIXOS</td><td>RTM</td><td>Rotterdam The Hague Airport</td></tr><tr><td>PT</td><td>PORTUGAL</td><td>LIS</td><td>Humberto Delgado Airport</td></tr><tr><td>PT</td><td>PORTUGAL</td><td>OPO</td><td>Francisco Sá Carneiro Airport</td></tr><tr><td>SG</td><td>SINGAPURA</td><td>SIN</td><td>Singapore Changi Airport</td></tr><tr><td>SG</td><td>SINGAPURA</td><td>XSP</td><td>Seletar Airport</td></tr><tr><td>SN</td><td>SENEGAL</td><td>DKR</td><td>Blaise Diagne International Airport</td></tr><tr><td>TR</td><td>TURQUIA</td><td>IST</td><td>Istanbul Airport</td></tr><tr><td>US</td><td>ESTADOS UNIDOS</td><td>AEX</td><td>Alexandria International Airport</td></tr><tr><td>US</td><td>ESTADOS UNIDOS</td><td>JFK</td><td>John F Kennedy International Airport</td></tr><tr><td>US</td><td>ESTADOS UNIDOS</td><td>MDW</td><td>Chicago Midway International Airport</td></tr><tr><td>US</td><td>ESTADOS UNIDOS</td><td>MIA</td><td>Miami International Airport</td></tr><tr><td>US</td><td>ESTADOS UNIDOS</td><td>SPG</td><td>Albert Whitted Airport</td></tr><tr><td>US</td><td>ESTADOS UNIDOS</td><td>ZWU</td><td>Washington Union Station</td></tr><tr><td>ZA</td><td>ÁFRICA DO SUL</td><td>JNB</td><td>OR Tambo International Airport</td></tr></tbody></table><h4>URLs de Acesso</h4><p>Para utilizar os servi&ccedil;os dispon&iacute;veis nessa API deve-se seguir o seguinte padr&atilde;o de URL:</p><p><em>https://{ambiente}/<strong>ccta</strong>/api/{servi&ccedil;o}</em></p><p>Onde, em <strong>{ambiente}</strong> deve-se informar o ambiente desejado dentro os ambientes dispon&iacute;veis na tabela abaixo e em <strong>{servi&ccedil;o}</strong> utilizar a URI do servi&ccedil;o desejado.</p><style type=\"text/css\">  .tg  {border-collapse:collapse;border-color:#bbb;border-spacing:0;width: 604px;}  .tg td{background-color:#E0FFEB;border-color:#bbb;border-style:solid;border-width:1px;color:#594F4F;    font-family:Arial, sans-serif;font-size:14px;overflow:hidden;padding:10px 5px;word-break:normal;}  .tg th{background-color:#9DE0AD;border-color:#bbb;border-style:solid;border-width:1px;color:#493F3F;    font-family:Arial, sans-serif;font-size:14px;font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}  .tg .tg-cabecalho{text-align:left;vertical-align:top}  .tg .tg-corpo{border-color:inherit;text-align:left;vertical-align:top}</style><table class=\"tg\" style=\"width: 604px;\"><thead>  <tr>    <th class=\"tg-cabecalho\"><span style=\"font-weight:bold\">Nome do Ambiente</span></th>    <th class=\"tg-cabecalho\"><span style=\"font-weight:bold\">URL de acesso</span></th>  </tr></thead><tbody>  <tr>    <td class=\"tg-corpo\">Ambiente de Validação da Empresas</td>    <td class=\"tg-corpo\">val.portalunico.siscomex.gov.br</td>  </tr>  <tr>    <td class=\"\\tg-corpo\">Ambiente de Produção</td>    <td class=\"\\tg-corpo\">portalunico.siscomex.gov.br</td>  </tr></tbody></table><p>&nbsp;</p><p><strong>Exemplo:</strong> Para o servi&ccedil;o \"Consultar Situação de Arquivos por Número de Protocolo\" a URI &eacute; \"ext/check/received-files/protocolo\".</p><p>Logo, abaixo temos um exemplo de URL completa considerando o ambiente de Valida&ccedil;&atilde;o, consumindo este servi&ccedil;o </p><p><em>https://val.portalunico.siscomex.gov.br/ccta/api/ext/check/received-files/protocolo</em></p>
 *
 */
@Path("/")
@Api(value = "/", description = "")
public interface ServiosDeEnvioDeArquivosApi  {

    /**
     * Informar Viagem - XFFM (Flight Manifest)
     *
     * &lt;p&gt;Encaminhamento de arquivo XML para processamento de viagens áereas com suas respectivas cargas. Uma viagem consiste em um voo específico, aeroporto de partida, aeroporto(s) de chegada(s) e data/hora de partida. Será permitida apenas uma mensagem &lt;strong&gt;(XFFM)&lt;/strong&gt; por arquivo, contendo a operação Creation, na versão 2.00, conforme o padrão estabelecido pela IATA. Não há operação Update ou Deletion para este arquivo.&lt;/p&gt;&lt;p&gt;Inicialmente, somente serão aceitos arquivos de viagem &lt;strong&gt;XFFM&lt;/strong&gt; com aeroporto de partida no exterior e o primeiro aeroporto de chegada no Brasil. Desta forma, o aeroporto de partida constante no &lt;strong&gt;XFFM&lt;/strong&gt; deve ser referente à última partida antes de chegar ao Brasil. Todas as cargas que se encontram na aeronave, independentemente do destino final das cargas, devem constar do &lt;strong&gt;XFFM&lt;/strong&gt;.&lt;/p&gt;&lt;p&gt;A data/hora de partida efetiva da viagem deve ser anterior à data/hora da chegada da viagem, caso haja informação de chegada para a mesma.&lt;/p&gt;&lt;p&gt;Os arquivos &lt;strong&gt;XFFM&lt;/strong&gt; devem ser enviados uma única vez por viagem. Caso seja necessária alteração dos dados após o envio, pode ser enviado novo arquivo com a operação Creation, que deve conter a mesma identificação de viagem e data de emissão posterior à anterior (FlightManifest/MessageHeaderDocument/IssueDateTime). Arquivos com mesma identificação de viagem e data de criação igual ou anterior serão rejeitados (situação &amp;quot;Rejected&amp;quot;).&lt;/p&gt;&lt;p&gt;A identificação da viagem (FlightManifest/BusinessHeaderDocument/ID) deve ser informada conforme o padrão IATA,  contendo exatamente 17 posições, no formato XX9999AAAAMMDDYYY, sendo:&lt;/p&gt;&lt;li&gt;XX9999: Código do voo, formado por 2 caracteres da sigla IATA da CIA aérea e 4 caracteres do número de voo. Quando o número do voo contiver menos de 4 caracteres numéricos, devem ser informados zeros à esquerda.&lt;/li&gt;&lt;li&gt;AAAAMMDD: Data de partida prevista do último aeroporto estrangeiro antes de vir ao Brasil.&lt;/li&gt;&lt;li&gt;YYY: Aeroporto de partida do último aeroporto estrangeiro antes de vir ao Brasil.&lt;/li&gt;&lt;p&gt;Um arquivo &lt;strong&gt;XFFM&lt;/strong&gt; que está sendo enviado pela primeira vez pode ser encaminhado a qualquer momento, inclusive após a chegada da aeronave. Já um arquivo que esteja substituindo o arquivo anterior poderá ser enviado após a primeira chegada da aeronave daquela viagem no Brasil, contanto que a retificação não seja para exclusão de conhecimentos de carga associados à viagem. Vale ressaltar que a troca do aeroporto de chegada de um conhecimento de carga não é considerada exclusão. Somente será considerada exclusão quando o conhecimento era mencionado no &lt;strong&gt;XFFM&lt;/strong&gt; original e deixou de ser mencionado após a retificação, independentemente do aeroporto de chegada.&lt;/p&gt;&lt;p&gt;Após 48 horas da chegada da viagem, não é mais permitido alterar informações sobre os conhecimentos de carga (ex: indicador de parcialidade, peso, volumes, etc) previstos para este aeroporto, sendo permitida apenas a inclusão de novos conhecimentos de carga. Para os demais aeroportos, pode haver alterações normalmente até que ocorra a informação de chegada da viagem.&lt;/p&gt;&lt;p&gt;A retificação de uma viagem poderá ser realizada igualmente via tela, sendo permitido a cada Companhia Aérea retificar somente as suas viagens, considerando a representação do usuário que está utilizando o sistema.&lt;/p&gt;&lt;p&gt;Nesta primeira versão do sistema, devem ser enviados apenas arquivos &lt;strong&gt;XFFM&lt;/strong&gt; com data da partida efetiva (A – Actual, após a partida do veículo) na tag FlightManifest/LogisticsTransportMovement/DepartureEvent/DepartureDateTimeTypeCode. Caso a data de partida seja prevista (S – Scheduled, antes da partida do veículo), o arquivo será rejeitado.&lt;/p&gt;&lt;p&gt;Os conhecimentos de carga que forem informados na viagem deverão ter código de classificação de mercadoria &lt;strong&gt;(NCM)&lt;/strong&gt; com 2, 4, 6 ou 8 posições, na tag FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedMasterConsignmentItem/TypeCode. &lt;/p&gt;&lt;p&gt;Todos os códigos de aeroporto devem ser informados com 3 caracteres, não sendo permitidos códigos UNLOCODE de 5 caracteres.&lt;/p&gt;&lt;p&gt;Os indicadores de parcialidade, informados na tag FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/TransportSplitDescription, são divididos em dois grupos:&lt;/p&gt;&lt;li&gt;Total - valores T ou S&lt;/li&gt;&lt;li&gt;Parcial - valores P, D ou M&lt;/li&gt;&lt;p&gt;Um conhecimento de carga em voos de origem internacional não pode estar em grupos distintos de parcialidade.&lt;/p&gt;&lt;p&gt;De acordo com a necessidade da Receita Federal do Brasil, algumas informações poderão ser registradas no bloco de dados &amp;quot;OtherCustomsInformations&amp;quot;, conforme apresentado a seguir:&lt;/p&gt;&lt;h4 id&#x3D;\&quot;indicador-conhecimento\&quot;&gt;Indicador de conhecimento de carga não IATA&lt;/h4&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;    &lt;th&gt;Campo&lt;/th&gt;    &lt;th&gt;Tag XML&lt;/th&gt;    &lt;th&gt;Valor&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;    &lt;td&gt;Other Customs, Security and Regulatory Control Information / Country code&lt;/td&gt;    &lt;td&gt;FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/CountryID&lt;/td&gt;    &lt;td&gt;Informar &lt;strong&gt;BR&lt;/strong&gt;&lt;/td&gt;    &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;    &lt;td&gt;Other Customs, Security and Regulatory Control Information / Information identifier&lt;/td&gt;    &lt;td&gt;FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/SubjectCode&lt;/td&gt;        &lt;td&gt;Informar &lt;strong&gt;WBI&lt;/strong&gt;&lt;/td&gt;    &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;    &lt;td&gt;Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier&lt;/td&gt;    &lt;td&gt;FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/ContendCode&lt;/td&gt;        &lt;td&gt;Informar &lt;strong&gt;DI&lt;/strong&gt;&lt;/td&gt;    &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;    &lt;td&gt;Other Customs, Security and Regulatory Control Information / Supplementary Customs, Security and Regulatory Control Information&lt;/td&gt;    &lt;td&gt;FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/Content&lt;/td&gt;        &lt;td&gt;Informar &lt;strong&gt;NON-IATA&lt;/strong&gt;&lt;/td&gt;    &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;OBS:&lt;/strong&gt; Caso seja informado um conhecimento de carga cuja identificação não esteja no padrão IATA, será obrigatório informar este indicador, caso contrário o arquivo será rejeitado.&lt;/p&gt;&lt;h4 id&#x3D;\&quot;codigo-recinto\&quot;&gt;Código do Recinto Aduaneiro da Chegada da Viagem&lt;/h4&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;    &lt;th&gt;Campo&lt;/th&gt;    &lt;th&gt;Tag XML&lt;/th&gt;    &lt;th&gt;Valor&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;    &lt;td&gt;Other Customs, Security and Regulatory Control Information / Country code&lt;/td&gt;    &lt;td&gt;FlightManifest/LogisticsTransportMovement/IncludedCustomsNote/CountryID&lt;/td&gt;    &lt;td&gt;Informar &lt;strong&gt;BR&lt;/strong&gt;&lt;/td&gt;    &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;    &lt;td&gt;Other Customs, Security and Regulatory Control Information / Information identifier&lt;/td&gt;    &lt;td&gt;FlightManifest/LogisticsTransportMovement/IncludedCustomsNote/SubjectCode&lt;/td&gt;        &lt;td&gt;Informar &lt;strong&gt;CCL&lt;/strong&gt;&lt;/td&gt;    &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;    &lt;td&gt;Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier&lt;/td&gt;    &lt;td&gt;FlightManifest/LogisticsTransportMovement/IncludedCustomsNote/ContendCode&lt;/td&gt;        &lt;td&gt;Informar &lt;strong&gt;M&lt;/strong&gt;&lt;/td&gt;    &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;    &lt;td&gt;Other Customs, Security and Regulatory Control Information / Supplementary Customs, Security and Regulatory Control Information&lt;/td&gt;    &lt;td&gt;FlightManifest/LogisticsTransportMovement/IncludedCustomsNote/Content&lt;/td&gt;        &lt;td&gt;&lt;p&gt;Informar &amp;quot;CUSTOMSWAREHOUSEXXX9999999&amp;quot;&lt;/p&gt;        &lt;p&gt;Contém  26 caracteres, sendo:&lt;/p&gt;        &lt;ul&gt;            &lt;li&gt;- 1º ao 16º caractere: texto fixo escrito CUSTOMSWAREHOUSE&lt;/li&gt;            &lt;li&gt;- 17º ao 19º caractere (XXX): sigla IATA  do aeroporto de chegada da viagem com 3 posições&lt;/li&gt;            &lt;li&gt;- 20º ao 26º caractere (9999999): código do recinto aduaneiro que irá recepcionar as cargas&lt;/li&gt;        &lt;/ul&gt;    &lt;/td&gt;    &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;OBS:&lt;/strong&gt;Este indicador deverá ser utilizado para sinalizar que a carga não será recepcionada no recinto aduaneiro principal do aeroporto de chegada, não sendo portanto uma tag obrigatória. O recinto aduaneiro informado neste indicador terá visibilidade de todas as cargas com chegada neste aeroporto. Este indicador poderá ser informado para cada aeroporto de chegada informado no &lt;strong&gt;XFFM&lt;/strong&gt;.&lt;/p&gt;&lt;h4 id&#x3D;\&quot;data-emissao\&quot;&gt;Data de emissão de conhecimento de carga&lt;/h4&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;    &lt;th&gt;Campo&lt;/th&gt;    &lt;th&gt;Tag XML&lt;/th&gt;    &lt;th&gt;Valor&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;    &lt;td&gt;Other Customs, Security and Regulatory Control Information / Country code&lt;/td&gt;    &lt;td&gt;FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/CountryID&lt;/td&gt;    &lt;td&gt;Informar &lt;strong&gt;BR&lt;/strong&gt;&lt;/td&gt;    &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;    &lt;td&gt;Other Customs, Security and Regulatory Control Information / Information identifier&lt;/td&gt;    &lt;td&gt;FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/SubjectCode&lt;/td&gt;        &lt;td&gt;Informar &lt;strong&gt;WBI&lt;/strong&gt;&lt;/td&gt;    &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;    &lt;td&gt;Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier&lt;/td&gt;    &lt;td&gt;FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/ContendCode&lt;/td&gt;        &lt;td&gt;Informar a tag com conteúdo vazio: &amp;quot;&amp;quot;&lt;/td&gt;    &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;    &lt;td&gt;Other Customs, Security and Regulatory Control Information / Supplementary Customs, Security and Regulatory Control Information&lt;/td&gt;    &lt;td&gt;FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/Content&lt;/td&gt;        &lt;td&gt;&lt;p&gt;Informar &amp;quot;CARRIERDECLARATIONDATEAAAAMMDD&amp;quot;:&lt;/p&gt;        &lt;p&gt;Contém 30 caracteres, sendo:&lt;/p&gt;        &lt;ul&gt;            &lt;li&gt;- 1º ao 22º caractere: CARRIERDECLARATIONDATE (texto fixo)&lt;/li&gt;            &lt;li&gt;- 23º ao 30º caractere (AAAAMMDD): data de emissão do conhecimento que será associado&lt;/li&gt;        &lt;/ul&gt;    &lt;/td&gt;    &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;OBS:&lt;/strong&gt;Este indicador deve ser informado quando a viagem estiver vinculada a conhecimento de carga que foi emitido há mais de um ano da data efetiva de partida da viagem (conhecimento não vigente). Caso este indicador não seja informado, o sistema vinculará a viagem aos conhecimentos de cargas vigentes no sistema.&lt;/p&gt;&lt;p&gt;Todas as informações de data no arquivo devem ser encaminhadas com o fuso horário no padrão YYYY-MM-DD&#39;T&#39;HH:mm:ss:SSS(‘+’/’-’)ZZ:ZZ.&lt;/p&gt;&lt;p&gt;A informação do fuso horário de partida ou chegada da aeronave refere-se ao fuso horário local. A data de criação do arquivo deverá ser informada com o fuso do local onde foi criado.&lt;/p&gt;&lt;h4 id&#x3D;\&quot;par-metros-de-entrada-\&quot;&gt;Parâmetros de Entrada:&lt;/h4&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Nome&lt;/th&gt;&lt;th&gt;Descrição&lt;/th&gt;&lt;th&gt;Tipo&lt;/th&gt;&lt;th&gt;Local&lt;/th&gt;&lt;th&gt;Detalhes&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Arquivo de viagem aérea (XFFM)&lt;/td&gt;&lt;td&gt;Viagem com sua lista de conhecimentos&lt;/td&gt;&lt;td&gt;Arquivo XML &lt;strong&gt;obrigatório&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;Body&lt;/td&gt;&lt;td&gt;Versão 2.00 da IATA - informado pelas Companhias Aéreas&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;cnpj&lt;/td&gt;&lt;td&gt;CNPJ da Companhia Aérea&lt;/td&gt;&lt;td&gt;Numérico(14) &lt;strong&gt;obrigatório&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;query param&lt;/td&gt;&lt;td&gt;CNPJ (formato 99999999999999)&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h4 id&#x3D;\&quot;resposta\&quot;&gt;Resposta :&lt;/h4&gt;&lt;p&gt;Os serviços de recebimento de arquivos terão o retorno de processamento por arquivo XFNM na versão 3.00, com as seguintes informações:&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;th&gt;Valor&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Message Reference ID&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / ID&lt;/td&gt;&lt;td&gt;Fixo &amp;quot;BRCUSTOMS&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Message Name&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / Name&lt;/td&gt;&lt;td&gt;Fixo &amp;quot;Response&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Message Type&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / TypeCode&lt;/td&gt;&lt;td&gt;Fixo &amp;quot;294&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Message Date / Time Stamp&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / IssueDateTime&lt;/td&gt;&lt;td&gt;Data / hora de processamento do arquivo - UTC time&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Message Function&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / PurposeCode&lt;/td&gt;&lt;td&gt;Fixo &amp;quot;Response&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Message Version&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / VersionID&lt;/td&gt;&lt;td&gt;Fixo &amp;quot;3.0&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Sender Qualifier&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / SenderParty / schemeID&lt;/td&gt;&lt;td&gt;Fixo &amp;quot;C&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Sender Identification&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / SenderParty / PrimaryID&lt;/td&gt;&lt;td&gt;Fixo &amp;quot;BRCUSTOMS&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Recipient Qualifier&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / RecipientParty / schemeID&lt;/td&gt;&lt;td&gt;Valor do campo Sender Qualifier (tag  MessageHeaderDocument / SenderParty / schemeID)  do arquivo recebido. Caso não seja passível de identificação ou for inválido ou não vier preenchido, será preenchido com “O’ (letra O)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Recipient Identification&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / RecipientParty / PrimaryID&lt;/td&gt;&lt;td&gt;Valor do campo Sender Identification (tag MessageHeaderDocument / SenderParty / PrimaryID) do arquivo recebido. Caso não seja passível de identificação ou for inválido ou não vier preenchido, será preenchido com &amp;quot;NOT IDENTIFIED&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Message Type&lt;/td&gt;&lt;td&gt;BusinessHeaderDocument / TypeCode&lt;/td&gt;&lt;td&gt;Valor do campo Message Type (tag MessageHeaderDocument / TypeCode) do arquivo original. Caso este campo não seja passível de identificação ou for inválido ou não vier preenchido,  será preenchido com 999.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Message Name&lt;/td&gt;&lt;td&gt;BusinessHeaderDocument / Name&lt;/td&gt;&lt;td&gt;Valor do campo Message Name (tag MessageHeaderDocument / Name) do arquivo original. Caso este campo não seja passível de identificação ou for inválido ou não vier preenchido, será preenchido com &amp;quot;NOT IDENTIFIED&amp;quot;.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Original Document Identification&lt;/td&gt;&lt;td&gt;BusinessHeaderDocument / ID&lt;/td&gt;&lt;td&gt;Valor do campo Message Reference ID (tag MessageHeaderDocument / ID) do arquivo original. Caso este campo não seja passível de identificação ou for inválido  ou não vier preenchido, será preenchido com &amp;quot;NOT IDENTIFIED&amp;quot;.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Response Type&lt;/td&gt;&lt;td&gt;BusinessHeaderDocument / StatusCode&lt;/td&gt;&lt;td&gt;“&lt;em&gt;Received&lt;/em&gt;” , “&lt;em&gt;Rejected&lt;/em&gt;” ou “&lt;em&gt;Processed&lt;/em&gt;” – conforme processamento do arquivo. Na versão atual, haverá resposta apenas nas situações “&lt;em&gt;Received&lt;/em&gt;” (arquivo recebido e será processado) ou “&lt;em&gt;Rejected&lt;/em&gt;”(arquivo foi rejeitado)&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Os arquivos que passarem pela validação do XSD (formato estabelecido pela IATA), receberão status “&lt;em&gt;Received&lt;/em&gt;”, acompanhado do número de protocolo gerado para este arquivo. Este número de protocolo pode ser utilizado para verificar a situação de processamento do arquivo por meio dos serviços &lt;em&gt;“Consultar Situação de Arquivos por Período”&lt;/em&gt; ou &lt;em&gt;“Consultar Situação de Arquivos por número de Protocolo”&lt;/em&gt;.&lt;/p&gt;&lt;p&gt;Já os arquivos que não passarem pela validação do XSD (formato estabelecido pela IATA) receberão status “&lt;em&gt;Rejected&lt;/em&gt;”, acompanhado da lista de erros encontrados.&lt;/p&gt;&lt;p&gt;Para arquivos com o campo Response Type igual a “&lt;em&gt;Received&lt;/em&gt;\&quot;, haverá somente um registro do bloco de dados Response Status, conforme abaixo. O campo &amp;quot;Text&amp;quot; terá tamanho de 5000 caracteres, diferentemente do padrão estabelecido pela IATA.&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;th&gt;Valor&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Category&lt;/td&gt;&lt;td&gt;ResponseStatus / ConditionCode&lt;/td&gt;&lt;td&gt;Acknowledgement&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Text&lt;/td&gt;&lt;td&gt;ResponseStatus / Reason&lt;/td&gt;&lt;td&gt;Número do protocolo de recebimento&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Para arquivos com o campo Response Type igual a “&lt;em&gt;Rejected&lt;/em&gt;”, cada ocorrência de erro conterá as seguintes informações no bloco de dados Response Status. O campo &amp;quot;Text&amp;quot; terá tamanho de 5000 caracteres, diferentemente do padrão estabelecido pela IATA.&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;th&gt;Valor&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Category&lt;/td&gt;&lt;td&gt;ResponseStatus / ConditionCode&lt;/td&gt;&lt;td&gt;Error&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Text&lt;/td&gt;&lt;td&gt;ResponseStatus / Reason&lt;/td&gt;&lt;td&gt;Texto contendo a linha e coluna com erro, (informando Row:&amp;#60;número da linha&amp;#62; &amp;#124; Column:&amp;#60;número da coluna&amp;#62;) e a descrição do erro verificada.Tamanho do campo: 5000 posições. Ex: &amp;quot;Row:7&amp;#124;Column:20&amp;#124;Error: cvc-complex-type.2.4.a: Invalid content was found starting with element &amp;#39;{&amp;quot;iata:datamodel:3&amp;quot;:PurposeCode}&amp;#39;. One of &amp;#39;{&amp;quot;iata:datamodel:3&amp;quot;:IssueDateTime}&amp;#39; is expected.&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
     *
     */
    @POST
    @Path("/ext/incoming/xffm")
    @Consumes({ "application/xml" })
    @Produces({ "application/xml" })
    @ApiOperation(value = "Informar Viagem - XFFM (Flight Manifest)", notes = "<p>Encaminhamento de arquivo XML para processamento de viagens áereas com suas respectivas cargas. Uma viagem consiste em um voo específico, aeroporto de partida, aeroporto(s) de chegada(s) e data/hora de partida. Será permitida apenas uma mensagem <strong>(XFFM)</strong> por arquivo, contendo a operação Creation, na versão 2.00, conforme o padrão estabelecido pela IATA. Não há operação Update ou Deletion para este arquivo.</p><p>Inicialmente, somente serão aceitos arquivos de viagem <strong>XFFM</strong> com aeroporto de partida no exterior e o primeiro aeroporto de chegada no Brasil. Desta forma, o aeroporto de partida constante no <strong>XFFM</strong> deve ser referente à última partida antes de chegar ao Brasil. Todas as cargas que se encontram na aeronave, independentemente do destino final das cargas, devem constar do <strong>XFFM</strong>.</p><p>A data/hora de partida efetiva da viagem deve ser anterior à data/hora da chegada da viagem, caso haja informação de chegada para a mesma.</p><p>Os arquivos <strong>XFFM</strong> devem ser enviados uma única vez por viagem. Caso seja necessária alteração dos dados após o envio, pode ser enviado novo arquivo com a operação Creation, que deve conter a mesma identificação de viagem e data de emissão posterior à anterior (FlightManifest/MessageHeaderDocument/IssueDateTime). Arquivos com mesma identificação de viagem e data de criação igual ou anterior serão rejeitados (situação &quot;Rejected&quot;).</p><p>A identificação da viagem (FlightManifest/BusinessHeaderDocument/ID) deve ser informada conforme o padrão IATA,  contendo exatamente 17 posições, no formato XX9999AAAAMMDDYYY, sendo:</p><li>XX9999: Código do voo, formado por 2 caracteres da sigla IATA da CIA aérea e 4 caracteres do número de voo. Quando o número do voo contiver menos de 4 caracteres numéricos, devem ser informados zeros à esquerda.</li><li>AAAAMMDD: Data de partida prevista do último aeroporto estrangeiro antes de vir ao Brasil.</li><li>YYY: Aeroporto de partida do último aeroporto estrangeiro antes de vir ao Brasil.</li><p>Um arquivo <strong>XFFM</strong> que está sendo enviado pela primeira vez pode ser encaminhado a qualquer momento, inclusive após a chegada da aeronave. Já um arquivo que esteja substituindo o arquivo anterior poderá ser enviado após a primeira chegada da aeronave daquela viagem no Brasil, contanto que a retificação não seja para exclusão de conhecimentos de carga associados à viagem. Vale ressaltar que a troca do aeroporto de chegada de um conhecimento de carga não é considerada exclusão. Somente será considerada exclusão quando o conhecimento era mencionado no <strong>XFFM</strong> original e deixou de ser mencionado após a retificação, independentemente do aeroporto de chegada.</p><p>Após 48 horas da chegada da viagem, não é mais permitido alterar informações sobre os conhecimentos de carga (ex: indicador de parcialidade, peso, volumes, etc) previstos para este aeroporto, sendo permitida apenas a inclusão de novos conhecimentos de carga. Para os demais aeroportos, pode haver alterações normalmente até que ocorra a informação de chegada da viagem.</p><p>A retificação de uma viagem poderá ser realizada igualmente via tela, sendo permitido a cada Companhia Aérea retificar somente as suas viagens, considerando a representação do usuário que está utilizando o sistema.</p><p>Nesta primeira versão do sistema, devem ser enviados apenas arquivos <strong>XFFM</strong> com data da partida efetiva (A – Actual, após a partida do veículo) na tag FlightManifest/LogisticsTransportMovement/DepartureEvent/DepartureDateTimeTypeCode. Caso a data de partida seja prevista (S – Scheduled, antes da partida do veículo), o arquivo será rejeitado.</p><p>Os conhecimentos de carga que forem informados na viagem deverão ter código de classificação de mercadoria <strong>(NCM)</strong> com 2, 4, 6 ou 8 posições, na tag FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedMasterConsignmentItem/TypeCode. </p><p>Todos os códigos de aeroporto devem ser informados com 3 caracteres, não sendo permitidos códigos UNLOCODE de 5 caracteres.</p><p>Os indicadores de parcialidade, informados na tag FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/TransportSplitDescription, são divididos em dois grupos:</p><li>Total - valores T ou S</li><li>Parcial - valores P, D ou M</li><p>Um conhecimento de carga em voos de origem internacional não pode estar em grupos distintos de parcialidade.</p><p>De acordo com a necessidade da Receita Federal do Brasil, algumas informações poderão ser registradas no bloco de dados &quot;OtherCustomsInformations&quot;, conforme apresentado a seguir:</p><h4 id=\"indicador-conhecimento\">Indicador de conhecimento de carga não IATA</h4><table><thead><tr>    <th>Campo</th>    <th>Tag XML</th>    <th>Valor</th></tr></thead><tbody><tr>    <td>Other Customs, Security and Regulatory Control Information / Country code</td>    <td>FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/CountryID</td>    <td>Informar <strong>BR</strong></td>    <td></td></tr><tr>    <td>Other Customs, Security and Regulatory Control Information / Information identifier</td>    <td>FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/SubjectCode</td>        <td>Informar <strong>WBI</strong></td>    <td></td></tr><tr>    <td>Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier</td>    <td>FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/ContendCode</td>        <td>Informar <strong>DI</strong></td>    <td></td></tr><tr>    <td>Other Customs, Security and Regulatory Control Information / Supplementary Customs, Security and Regulatory Control Information</td>    <td>FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/Content</td>        <td>Informar <strong>NON-IATA</strong></td>    <td></td></tr></tbody></table><p><strong>OBS:</strong> Caso seja informado um conhecimento de carga cuja identificação não esteja no padrão IATA, será obrigatório informar este indicador, caso contrário o arquivo será rejeitado.</p><h4 id=\"codigo-recinto\">Código do Recinto Aduaneiro da Chegada da Viagem</h4><table><thead><tr>    <th>Campo</th>    <th>Tag XML</th>    <th>Valor</th></tr></thead><tbody><tr>    <td>Other Customs, Security and Regulatory Control Information / Country code</td>    <td>FlightManifest/LogisticsTransportMovement/IncludedCustomsNote/CountryID</td>    <td>Informar <strong>BR</strong></td>    <td></td></tr><tr>    <td>Other Customs, Security and Regulatory Control Information / Information identifier</td>    <td>FlightManifest/LogisticsTransportMovement/IncludedCustomsNote/SubjectCode</td>        <td>Informar <strong>CCL</strong></td>    <td></td></tr><tr>    <td>Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier</td>    <td>FlightManifest/LogisticsTransportMovement/IncludedCustomsNote/ContendCode</td>        <td>Informar <strong>M</strong></td>    <td></td></tr><tr>    <td>Other Customs, Security and Regulatory Control Information / Supplementary Customs, Security and Regulatory Control Information</td>    <td>FlightManifest/LogisticsTransportMovement/IncludedCustomsNote/Content</td>        <td><p>Informar &quot;CUSTOMSWAREHOUSEXXX9999999&quot;</p>        <p>Contém  26 caracteres, sendo:</p>        <ul>            <li>- 1º ao 16º caractere: texto fixo escrito CUSTOMSWAREHOUSE</li>            <li>- 17º ao 19º caractere (XXX): sigla IATA  do aeroporto de chegada da viagem com 3 posições</li>            <li>- 20º ao 26º caractere (9999999): código do recinto aduaneiro que irá recepcionar as cargas</li>        </ul>    </td>    <td></td></tr></tbody></table><p><strong>OBS:</strong>Este indicador deverá ser utilizado para sinalizar que a carga não será recepcionada no recinto aduaneiro principal do aeroporto de chegada, não sendo portanto uma tag obrigatória. O recinto aduaneiro informado neste indicador terá visibilidade de todas as cargas com chegada neste aeroporto. Este indicador poderá ser informado para cada aeroporto de chegada informado no <strong>XFFM</strong>.</p><h4 id=\"data-emissao\">Data de emissão de conhecimento de carga</h4><table><thead><tr>    <th>Campo</th>    <th>Tag XML</th>    <th>Valor</th></tr></thead><tbody><tr>    <td>Other Customs, Security and Regulatory Control Information / Country code</td>    <td>FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/CountryID</td>    <td>Informar <strong>BR</strong></td>    <td></td></tr><tr>    <td>Other Customs, Security and Regulatory Control Information / Information identifier</td>    <td>FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/SubjectCode</td>        <td>Informar <strong>WBI</strong></td>    <td></td></tr><tr>    <td>Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier</td>    <td>FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/ContendCode</td>        <td>Informar a tag com conteúdo vazio: &quot;&quot;</td>    <td></td></tr><tr>    <td>Other Customs, Security and Regulatory Control Information / Supplementary Customs, Security and Regulatory Control Information</td>    <td>FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/Content</td>        <td><p>Informar &quot;CARRIERDECLARATIONDATEAAAAMMDD&quot;:</p>        <p>Contém 30 caracteres, sendo:</p>        <ul>            <li>- 1º ao 22º caractere: CARRIERDECLARATIONDATE (texto fixo)</li>            <li>- 23º ao 30º caractere (AAAAMMDD): data de emissão do conhecimento que será associado</li>        </ul>    </td>    <td></td></tr></tbody></table><p><strong>OBS:</strong>Este indicador deve ser informado quando a viagem estiver vinculada a conhecimento de carga que foi emitido há mais de um ano da data efetiva de partida da viagem (conhecimento não vigente). Caso este indicador não seja informado, o sistema vinculará a viagem aos conhecimentos de cargas vigentes no sistema.</p><p>Todas as informações de data no arquivo devem ser encaminhadas com o fuso horário no padrão YYYY-MM-DD'T'HH:mm:ss:SSS(‘+’/’-’)ZZ:ZZ.</p><p>A informação do fuso horário de partida ou chegada da aeronave refere-se ao fuso horário local. A data de criação do arquivo deverá ser informada com o fuso do local onde foi criado.</p><h4 id=\"par-metros-de-entrada-\">Parâmetros de Entrada:</h4><table><thead><tr><th>Nome</th><th>Descrição</th><th>Tipo</th><th>Local</th><th>Detalhes</th></tr></thead><tbody><tr><td>Arquivo de viagem aérea (XFFM)</td><td>Viagem com sua lista de conhecimentos</td><td>Arquivo XML <strong>obrigatório</strong></td><td>Body</td><td>Versão 2.00 da IATA - informado pelas Companhias Aéreas</td><td></td></tr><tr><td>cnpj</td><td>CNPJ da Companhia Aérea</td><td>Numérico(14) <strong>obrigatório</strong></td><td>query param</td><td>CNPJ (formato 99999999999999)</td><td></td></tr></tbody></table><h4 id=\"resposta\">Resposta :</h4><p>Os serviços de recebimento de arquivos terão o retorno de processamento por arquivo XFNM na versão 3.00, com as seguintes informações:</p><table><thead><tr><th>Campo</th><th>Tag XML</th><th>Valor</th></tr></thead><tbody><tr><td>Message Reference ID</td><td>MessageHeaderDocument / ID</td><td>Fixo &quot;BRCUSTOMS&quot;</td></tr><tr><td>Message Name</td><td>MessageHeaderDocument / Name</td><td>Fixo &quot;Response&quot;</td></tr><tr><td>Message Type</td><td>MessageHeaderDocument / TypeCode</td><td>Fixo &quot;294&quot;</td></tr><tr><td>Message Date / Time Stamp</td><td>MessageHeaderDocument / IssueDateTime</td><td>Data / hora de processamento do arquivo - UTC time</td></tr><tr><td>Message Function</td><td>MessageHeaderDocument / PurposeCode</td><td>Fixo &quot;Response&quot;</td></tr><tr><td>Message Version</td><td>MessageHeaderDocument / VersionID</td><td>Fixo &quot;3.0&quot;</td></tr><tr><td>Sender Qualifier</td><td>MessageHeaderDocument / SenderParty / schemeID</td><td>Fixo &quot;C&quot;</td></tr><tr><td>Sender Identification</td><td>MessageHeaderDocument / SenderParty / PrimaryID</td><td>Fixo &quot;BRCUSTOMS&quot;</td></tr><tr><td>Recipient Qualifier</td><td>MessageHeaderDocument / RecipientParty / schemeID</td><td>Valor do campo Sender Qualifier (tag  MessageHeaderDocument / SenderParty / schemeID)  do arquivo recebido. Caso não seja passível de identificação ou for inválido ou não vier preenchido, será preenchido com “O’ (letra O)</td></tr><tr><td>Recipient Identification</td><td>MessageHeaderDocument / RecipientParty / PrimaryID</td><td>Valor do campo Sender Identification (tag MessageHeaderDocument / SenderParty / PrimaryID) do arquivo recebido. Caso não seja passível de identificação ou for inválido ou não vier preenchido, será preenchido com &quot;NOT IDENTIFIED&quot;</td></tr><tr><td>Message Type</td><td>BusinessHeaderDocument / TypeCode</td><td>Valor do campo Message Type (tag MessageHeaderDocument / TypeCode) do arquivo original. Caso este campo não seja passível de identificação ou for inválido ou não vier preenchido,  será preenchido com 999.</td></tr><tr><td>Message Name</td><td>BusinessHeaderDocument / Name</td><td>Valor do campo Message Name (tag MessageHeaderDocument / Name) do arquivo original. Caso este campo não seja passível de identificação ou for inválido ou não vier preenchido, será preenchido com &quot;NOT IDENTIFIED&quot;.</td></tr><tr><td>Original Document Identification</td><td>BusinessHeaderDocument / ID</td><td>Valor do campo Message Reference ID (tag MessageHeaderDocument / ID) do arquivo original. Caso este campo não seja passível de identificação ou for inválido  ou não vier preenchido, será preenchido com &quot;NOT IDENTIFIED&quot;.</td></tr><tr><td>Response Type</td><td>BusinessHeaderDocument / StatusCode</td><td>“<em>Received</em>” , “<em>Rejected</em>” ou “<em>Processed</em>” – conforme processamento do arquivo. Na versão atual, haverá resposta apenas nas situações “<em>Received</em>” (arquivo recebido e será processado) ou “<em>Rejected</em>”(arquivo foi rejeitado)</td></tr></tbody></table><p>Os arquivos que passarem pela validação do XSD (formato estabelecido pela IATA), receberão status “<em>Received</em>”, acompanhado do número de protocolo gerado para este arquivo. Este número de protocolo pode ser utilizado para verificar a situação de processamento do arquivo por meio dos serviços <em>“Consultar Situação de Arquivos por Período”</em> ou <em>“Consultar Situação de Arquivos por número de Protocolo”</em>.</p><p>Já os arquivos que não passarem pela validação do XSD (formato estabelecido pela IATA) receberão status “<em>Rejected</em>”, acompanhado da lista de erros encontrados.</p><p>Para arquivos com o campo Response Type igual a “<em>Received</em>\", haverá somente um registro do bloco de dados Response Status, conforme abaixo. O campo &quot;Text&quot; terá tamanho de 5000 caracteres, diferentemente do padrão estabelecido pela IATA.</p><table><thead><tr><th>Campo</th><th>Tag XML</th><th>Valor</th></tr></thead><tbody><tr><td>Category</td><td>ResponseStatus / ConditionCode</td><td>Acknowledgement</td></tr><tr><td>Text</td><td>ResponseStatus / Reason</td><td>Número do protocolo de recebimento</td></tr></tbody></table><p>Para arquivos com o campo Response Type igual a “<em>Rejected</em>”, cada ocorrência de erro conterá as seguintes informações no bloco de dados Response Status. O campo &quot;Text&quot; terá tamanho de 5000 caracteres, diferentemente do padrão estabelecido pela IATA.</p><table><thead><tr><th>Campo</th><th>Tag XML</th><th>Valor</th></tr></thead><tbody><tr><td>Category</td><td>ResponseStatus / ConditionCode</td><td>Error</td></tr><tr><td>Text</td><td>ResponseStatus / Reason</td><td>Texto contendo a linha e coluna com erro, (informando Row:&#60;número da linha&#62; &#124; Column:&#60;número da coluna&#62;) e a descrição do erro verificada.Tamanho do campo: 5000 posições. Ex: &quot;Row:7&#124;Column:20&#124;Error: cvc-complex-type.2.4.a: Invalid content was found starting with element &#39;{&quot;iata:datamodel:3&quot;:PurposeCode}&#39;. One of &#39;{&quot;iata:datamodel:3&quot;:IssueDateTime}&#39; is expected.</td></tr></tbody></table>", tags={ "Serviços de Envio de Arquivos" })
    @ApiResponses(value = { 
        @ApiResponse(code = 200, message = "Operação realizada com sucesso", response = String.class),
        @ApiResponse(code = 204, message = "Operação realizada com sucesso. Nenhum conteúdo retornado"),
        @ApiResponse(code = 400, message = "Requisição mal formatada"),
        @ApiResponse(code = 401, message = "Usuário não autenticado ou autenticação inválida"),
        @ApiResponse(code = 403, message = "Usuário não tem permissão de acesso ao recurso"),
        @ApiResponse(code = 404, message = "Recurso não encontrado"),
        @ApiResponse(code = 422, message = "Erro(s) de validação da camada de negócio"),
        @ApiResponse(code = 500, message = "Erro interno no servidor") })
    public Response doPost(@QueryParam("TPP-ID") String TPP_ID, @HeaderParam("abi") String abi, @ApiParam(value = "" ,required=true)@Valid String body,  @NotNull @ApiParam(value = "CNPJ da Companhia Aérea  Tamanho: 14  Formato: NNNNNNNNNNNNNN",required=true)  @QueryParam("cnpj") String cnpj, @ApiParam(value = "JSON Web Token (JWT) contendo as informações do usuário. Este token é recuperado no parâmetro Set-Token no response da autenticação" ,required=true)@HeaderParam("Authorization") String authorization, @ApiParam(value = "Token de prevenção contra ataques CSRF. Este token é recuperado no parâmetro X-CSRF-Token no response da autenticação" ,required=true)@HeaderParam("X-CSRF-Token") String xCSRFToken);

    /**
     * Informar Associação Master e House - XFHL (House Manifest)
     *
     * &lt;p&gt;Encaminhamento de arquivo XML para processamento da associação entre um conhecimento de carga AWB (Air Waybill) ou MAWB (Master Air Waybill) e conhecimento(s) de carga HAWB (House Air Waybill).Será permitida apenas uma mensagem XFHL por arquivo, contendo a operação Creation, Update ou Deletion, na versão 2.00, conforme o padrão estabelecido pela IATA.&lt;/p&gt;&lt;p&gt;Os arquivos com operação Update ou Deletion serão processados caso exista um arquivo com a operação Creation recebido anteriormente com sucesso no sistema, contendo a mesma identificação do conhecimento de carga do MAWB/AWB e vigente.&lt;/p&gt;&lt;p&gt;Para que um MAWB/AWB seja considerado associado aos seus HAWB, deve haver arquivo de associação MAWB/HAWB (XFHL) que referencie o MAWB (XFWB) e a respectiva lista de HAWB (XFZB) associados.&lt;/p&gt;&lt;p&gt;Um arquivo XFHL que está sendo enviado com a operação Creation pode ser encaminhado a qualquer momento, inclusive após a chegada da aeronave. Já um arquivo que tenha a operação Update (contanto que contenha a exclusão de alguma das associações) ou a operação Deletion somente será aceito até a primeira chegada da viagem no Brasil e caso a carga não esteja vinculada a um documento de saída. Nessas situações, as operações de retificação ou exclusão somente poderão ser realizadas por funcionalidade de tela (web) e pela RFB. Retificações somente para inclusão de associações são permitidas.&lt;/p&gt;&lt;p&gt;De acordo com a necessidade da Receita Federal do Brasil, algumas informações poderão ser registradas no bloco de dados \&quot;OtherCustomsInformations\&quot;, conforme apresentado a seguir:&lt;/p&gt;&lt;h4 id&#x3D;\&quot;indicador-conhecimento\&quot;&gt;Indicador de conhecimento de carga não IATA&lt;/h4&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;    &lt;th&gt;Campo&lt;/th&gt;    &lt;th&gt;Tag XML&lt;/th&gt;    &lt;th&gt;Valor&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;    &lt;td&gt;Other Customs, Security and Regulatory Control Information / Country code&lt;/td&gt;    &lt;td&gt;FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/CountryID&lt;/td&gt;    &lt;td&gt;Informar &lt;strong&gt;BR&lt;/strong&gt;&lt;/td&gt;    &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;    &lt;td&gt;Other Customs, Security and Regulatory Control Information / Information identifier&lt;/td&gt;    &lt;td&gt;FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/SubjectCode&lt;/td&gt;        &lt;td&gt;Informar &lt;strong&gt;WBI&lt;/strong&gt;&lt;/td&gt;    &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;    &lt;td&gt;Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier&lt;/td&gt;    &lt;td&gt;FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/ContendCode&lt;/td&gt;        &lt;td&gt;Informar &lt;strong&gt;DI&lt;/strong&gt;&lt;/td&gt;    &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;    &lt;td&gt;Other Customs, Security and Regulatory Control Information / Supplementary Customs, Security and Regulatory Control Information&lt;/td&gt;    &lt;td&gt;FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/Content&lt;/td&gt;        &lt;td&gt;Informar &lt;strong&gt;NON-IATA&lt;/strong&gt;&lt;/td&gt;    &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;OBS:&lt;/strong&gt; Caso seja informado um conhecimento de carga cuja identificação não esteja no padrão IATA, será obrigatório informar este indicador, caso contrário o arquivo será rejeitado.&lt;/p&gt;&lt;h4 id&#x3D;\&quot;data-emissao\&quot;&gt;Data de emissão de conhecimento de carga&lt;/h4&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;    &lt;th&gt;Campo&lt;/th&gt;    &lt;th&gt;Tag XML&lt;/th&gt;    &lt;th&gt;Valor&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;    &lt;td&gt;Other Customs, Security and Regulatory Control Information / Country code&lt;/td&gt;    &lt;td&gt;FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/CountryID&lt;/td&gt;    &lt;td&gt;Informar &lt;strong&gt;BR&lt;/strong&gt;&lt;/td&gt;    &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;    &lt;td&gt;Other Customs, Security and Regulatory Control Information / Information identifier&lt;/td&gt;    &lt;td&gt;FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/SubjectCode&lt;/td&gt;        &lt;td&gt;Informar &lt;strong&gt;WBI&lt;/strong&gt;&lt;/td&gt;    &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;    &lt;td&gt;Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier&lt;/td&gt;    &lt;td&gt;FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/ContendCode&lt;/td&gt;        &lt;td&gt;Informar a tag com conteúdo vazio: &amp;quot;&amp;quot;&lt;/td&gt;    &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;    &lt;td&gt;Other Customs, Security and Regulatory Control Information / Supplementary Customs, Security and Regulatory Control Information&lt;/td&gt;    &lt;td&gt;FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/Content&lt;/td&gt;        &lt;td&gt;&lt;p&gt;Informar &amp;quot;CARRIERDECLARATIONDATEAAAAMMDD&amp;quot;:&lt;/p&gt;        &lt;p&gt;Contém 30 caracteres, sendo:&lt;/p&gt;        &lt;ul&gt;            &lt;li&gt;- 1º ao 22º caractere: CARRIERDECLARATIONDATE (texto fixo)&lt;/li&gt;            &lt;li&gt;- 23º ao 30º caractere (AAAAMMDD): data de emissão do conhecimento que será associado&lt;/li&gt;        &lt;/ul&gt;    &lt;/td&gt;    &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;OBS:&lt;/strong&gt;Este indicador deve ser informado quando o conhecimento de carga, seja o MAWB/AWB ou algum dos HAWB, foi emitido há mais de um ano da data efetiva de partida da viagem (conhecimento não vigente). Caso este indicador não seja informado, o sistema vinculará o MAWB/AWB vigente aos HAWB vigentes no sistema.&lt;/p&gt;&lt;p&gt;Todas as informações de data no arquivo devem ser encaminhadas contendo o fuso horário no padrão YYYY-MM-DD&#39;T&#39;HH:mm:ss:SSS(‘+’/’-’)ZZ:ZZ.&lt;/p&gt;&lt;p&gt;A informação do fuso horário de partida ou chegada da aeronave refere-se ao fuso horário local. A data de criação do arquivo deverá ser informada com o fuso do local onde foi criado.&lt;/p&gt;&lt;h4 id&#x3D;\&quot;par-metros-de-entrada-\&quot;&gt;Parâmetros de Entrada:&lt;/h4&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Nome&lt;/th&gt;&lt;th&gt;Descrição&lt;/th&gt;&lt;th&gt;Tipo&lt;/th&gt;&lt;th&gt;Local&lt;/th&gt;&lt;th&gt;Detalhes&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Arquivo de associação  (XFHL)&lt;/td&gt;&lt;td&gt;Associação entre &lt;em&gt;master&lt;/em&gt;(MAWB) e &lt;em&gt;house&lt;/em&gt;(HAWB)&lt;/td&gt;&lt;td&gt;Arquivo XML &lt;strong&gt;obrigatório&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;Body&lt;/td&gt;&lt;td&gt;Versão 2.00 da IATA - informado pelos Agentes de Carga ou pelo Operador de Remessa Postal / Expressa&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;cnpj&lt;/td&gt;&lt;td&gt;CNPJ do Agente de Carga ou do Operador de Remessa Postal / Expressa&lt;/td&gt;&lt;td&gt;Numérico(14) &lt;strong&gt;obrigatório&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;query param&lt;/td&gt;&lt;td&gt;CNPJ (formato 99999999999999)&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;code&gt;Associação entre master(MAWB) e house(HAWB) Arquivo XML obrigatório.&lt;/code&gt;&lt;/p&gt;&lt;h4 id&#x3D;\&quot;resposta-\&quot;&gt;Resposta :&lt;/h4&gt;&lt;p&gt;Os serviços de recebimento de arquivos terão o retorno de processamento por arquivo XFNM na versão 3.00, com as seguintes informações:&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;th&gt;Valor&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Message Reference ID&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / ID&lt;/td&gt;&lt;td&gt;Fixo &amp;quot;BRCUSTOMS&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Message Name&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / Name&lt;/td&gt;&lt;td&gt;Fixo &amp;quot;Response&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Message Type&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / TypeCode&lt;/td&gt;&lt;td&gt;Fixo &amp;quot;294&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Message Date / Time Stamp&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / IssueDateTime&lt;/td&gt;&lt;td&gt;Data / hora de processamento do arquivo - UTC time&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Message Function&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / PurposeCode&lt;/td&gt;&lt;td&gt;Fixo &amp;quot;Response&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Message Version&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / VersionID&lt;/td&gt;&lt;td&gt;Fixo &amp;quot;3.0&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Sender Qualifier&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / SenderParty / schemeID&lt;/td&gt;&lt;td&gt;Fixo &amp;quot;C&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Sender Identification&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / SenderParty / PrimaryID&lt;/td&gt;&lt;td&gt;Fixo &amp;quot;BRCUSTOMS&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Recipient Qualifier&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / RecipientParty / schemeID&lt;/td&gt;&lt;td&gt;Valor do campo Sender Qualifier (tag MessageHeaderDocument / SenderParty / schemeID) do arquivo recebido. Caso não seja passível de identificação ou for inválido ou não vier preenchido, será preenchido com “O” (letra O)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Recipient Identification&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / RecipientParty / PrimaryID&lt;/td&gt;&lt;td&gt;Valor do campo Sender Identification (tag MessageHeaderDocument / SenderParty / PrimaryID) do arquivo recebido. Caso não seja passível de identificação ou for inválido ou não vier preenchido, será preenchido com \&quot;NOT IDENTIFIED\&quot;.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Message Type&lt;/td&gt;&lt;td&gt;BusinessHeaderDocument / TypeCode&lt;/td&gt;&lt;td&gt;Valor do campo Message Type (tag MessageHeaderDocument / TypeCode) do arquivo original. Caso este campo não seja passível de identificação ou for inválido ou não vier preenchido, será preenchido com 999.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Message Name&lt;/td&gt;&lt;td&gt;BusinessHeaderDocument / Name&lt;/td&gt;&lt;td&gt;Valor do campo Message Name (tag MessageHeaderDocument / Name) do arquivo original. Caso este campo não seja passível de identificação ou for inválido ou não vier preenchido, será preenchido com \&quot;NOT IDENTIFIED\&quot;.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Original Document Identification&lt;/td&gt;&lt;td&gt;BusinessHeaderDocument / ID&lt;/td&gt;&lt;td&gt;Valor do campo Message Reference ID (tag MessageHeaderDocument / ID) do arquivo original. Caso este campo não seja passível de identificação ou for inválido ou não vier preenchido, será preenchido com \&quot;NOT IDENTIFIED\&quot;.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Response Type&lt;/td&gt;&lt;td&gt;BusinessHeaderDocument / StatusCode&lt;/td&gt;&lt;td&gt;“&lt;em&gt;Received&lt;/em&gt;” , “&lt;em&gt;Rejected&lt;/em&gt;” ou “&lt;em&gt;Processed&lt;/em&gt;” – conforme processamento do arquivo. Na versão atual, haverá resposta apenas nas situações “&lt;em&gt;Received&lt;/em&gt;” (arquivo recebido e será processado) ou “&lt;em&gt;Rejected&lt;/em&gt;”(arquivo foi rejeitado)&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Os arquivos que passarem pela validação do XSD (formato estabelecido pela IATA), receberão status \&quot;Received\&quot;, acompanhado do número de protocolo gerado para este arquivo. Este número de protocolo pode ser utilizado para verificar a situação de processamento do arquivo por meio por meio dos serviços \&quot;Consultar Situação de Arquivos por Data\&quot; ou \&quot;Consultar Situação de Arquivos por número de Protocolo\&quot;.&lt;/p&gt;&lt;p&gt;Já os arquivos que não passarem pela validação do XSD (formato estabelecido pela IATA) receberão status “&lt;em&gt;Rejected&lt;/em&gt;”, acompanhado da lista de erros encontrados.&lt;/p&gt;&lt;p&gt;Para arquivos com o campo Response Type igual a “&lt;em&gt;Received&lt;/em&gt;”, haverá somente um registro do bloco de dados Response Status, conforme abaixo. O campo &amp;quot;Text&amp;quot; terá tamanho de 5000 caracteres, diferentemente do padrão estabelecido pela IATA.&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;th&gt;Valor&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Category&lt;/td&gt;&lt;td&gt;ResponseStatus / ConditionCode&lt;/td&gt;&lt;td&gt;Acknowledgement&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Text&lt;/td&gt;&lt;td&gt;ResponseStatus / Reason&lt;/td&gt;&lt;td&gt;Número do protocolo de recebimento&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Para arquivos com o campo Response Type igual a “&lt;em&gt;Rejected&lt;/em&gt;”, cada ocorrência de erro conterá as seguintes informações no bloco de dados Response Status. O campo &amp;quot;Text&amp;quot; terá tamanho de 5000 caracteres, diferentemente do padrão estabelecido pela IATA.&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;th&gt;Valor&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Category&lt;/td&gt;&lt;td&gt;ResponseStatus / ConditionCode&lt;/td&gt;&lt;td&gt;Error&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Text&lt;/td&gt;&lt;td&gt;ResponseStatus / Reason&lt;/td&gt;&lt;td&gt;Texto contendo a linha e coluna com erro, (informando Row:&amp;#60;número da linha&amp;#62; &amp;#124; Column:&amp;#60;número da coluna&amp;#62;) e a descrição do erro verificado.Tamanho do campo: 5000 posições. Ex: &amp;quot;Row:7&amp;#124;Column:20&amp;#124;Error: cvc-complex-type.2.4.a: Invalid content was found starting with element &amp;#39;{&amp;quot;iata:datamodel:3&amp;quot;:PurposeCode}&amp;#39;. One of &amp;#39;{&amp;quot;iata:datamodel:3&amp;quot;:IssueDateTime}&amp;#39; is expected.&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
     *
     */
    @POST
    @Path("/ext/incoming/xfhl")
    @Consumes({ "application/xml" })
    @Produces({ "application/xml" })
    @ApiOperation(value = "Informar Associação Master e House - XFHL (House Manifest)", notes = "<p>Encaminhamento de arquivo XML para processamento da associação entre um conhecimento de carga AWB (Air Waybill) ou MAWB (Master Air Waybill) e conhecimento(s) de carga HAWB (House Air Waybill).Será permitida apenas uma mensagem XFHL por arquivo, contendo a operação Creation, Update ou Deletion, na versão 2.00, conforme o padrão estabelecido pela IATA.</p><p>Os arquivos com operação Update ou Deletion serão processados caso exista um arquivo com a operação Creation recebido anteriormente com sucesso no sistema, contendo a mesma identificação do conhecimento de carga do MAWB/AWB e vigente.</p><p>Para que um MAWB/AWB seja considerado associado aos seus HAWB, deve haver arquivo de associação MAWB/HAWB (XFHL) que referencie o MAWB (XFWB) e a respectiva lista de HAWB (XFZB) associados.</p><p>Um arquivo XFHL que está sendo enviado com a operação Creation pode ser encaminhado a qualquer momento, inclusive após a chegada da aeronave. Já um arquivo que tenha a operação Update (contanto que contenha a exclusão de alguma das associações) ou a operação Deletion somente será aceito até a primeira chegada da viagem no Brasil e caso a carga não esteja vinculada a um documento de saída. Nessas situações, as operações de retificação ou exclusão somente poderão ser realizadas por funcionalidade de tela (web) e pela RFB. Retificações somente para inclusão de associações são permitidas.</p><p>De acordo com a necessidade da Receita Federal do Brasil, algumas informações poderão ser registradas no bloco de dados \"OtherCustomsInformations\", conforme apresentado a seguir:</p><h4 id=\"indicador-conhecimento\">Indicador de conhecimento de carga não IATA</h4><table><thead><tr>    <th>Campo</th>    <th>Tag XML</th>    <th>Valor</th></tr></thead><tbody><tr>    <td>Other Customs, Security and Regulatory Control Information / Country code</td>    <td>FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/CountryID</td>    <td>Informar <strong>BR</strong></td>    <td></td></tr><tr>    <td>Other Customs, Security and Regulatory Control Information / Information identifier</td>    <td>FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/SubjectCode</td>        <td>Informar <strong>WBI</strong></td>    <td></td></tr><tr>    <td>Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier</td>    <td>FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/ContendCode</td>        <td>Informar <strong>DI</strong></td>    <td></td></tr><tr>    <td>Other Customs, Security and Regulatory Control Information / Supplementary Customs, Security and Regulatory Control Information</td>    <td>FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/Content</td>        <td>Informar <strong>NON-IATA</strong></td>    <td></td></tr></tbody></table><p><strong>OBS:</strong> Caso seja informado um conhecimento de carga cuja identificação não esteja no padrão IATA, será obrigatório informar este indicador, caso contrário o arquivo será rejeitado.</p><h4 id=\"data-emissao\">Data de emissão de conhecimento de carga</h4><table><thead><tr>    <th>Campo</th>    <th>Tag XML</th>    <th>Valor</th></tr></thead><tbody><tr>    <td>Other Customs, Security and Regulatory Control Information / Country code</td>    <td>FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/CountryID</td>    <td>Informar <strong>BR</strong></td>    <td></td></tr><tr>    <td>Other Customs, Security and Regulatory Control Information / Information identifier</td>    <td>FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/SubjectCode</td>        <td>Informar <strong>WBI</strong></td>    <td></td></tr><tr>    <td>Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier</td>    <td>FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/ContendCode</td>        <td>Informar a tag com conteúdo vazio: &quot;&quot;</td>    <td></td></tr><tr>    <td>Other Customs, Security and Regulatory Control Information / Supplementary Customs, Security and Regulatory Control Information</td>    <td>FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/Content</td>        <td><p>Informar &quot;CARRIERDECLARATIONDATEAAAAMMDD&quot;:</p>        <p>Contém 30 caracteres, sendo:</p>        <ul>            <li>- 1º ao 22º caractere: CARRIERDECLARATIONDATE (texto fixo)</li>            <li>- 23º ao 30º caractere (AAAAMMDD): data de emissão do conhecimento que será associado</li>        </ul>    </td>    <td></td></tr></tbody></table><p><strong>OBS:</strong>Este indicador deve ser informado quando o conhecimento de carga, seja o MAWB/AWB ou algum dos HAWB, foi emitido há mais de um ano da data efetiva de partida da viagem (conhecimento não vigente). Caso este indicador não seja informado, o sistema vinculará o MAWB/AWB vigente aos HAWB vigentes no sistema.</p><p>Todas as informações de data no arquivo devem ser encaminhadas contendo o fuso horário no padrão YYYY-MM-DD'T'HH:mm:ss:SSS(‘+’/’-’)ZZ:ZZ.</p><p>A informação do fuso horário de partida ou chegada da aeronave refere-se ao fuso horário local. A data de criação do arquivo deverá ser informada com o fuso do local onde foi criado.</p><h4 id=\"par-metros-de-entrada-\">Parâmetros de Entrada:</h4><table><thead><tr><th>Nome</th><th>Descrição</th><th>Tipo</th><th>Local</th><th>Detalhes</th></tr></thead><tbody><tr><td>Arquivo de associação  (XFHL)</td><td>Associação entre <em>master</em>(MAWB) e <em>house</em>(HAWB)</td><td>Arquivo XML <strong>obrigatório</strong></td><td>Body</td><td>Versão 2.00 da IATA - informado pelos Agentes de Carga ou pelo Operador de Remessa Postal / Expressa</td><td></td></tr><tr><td>cnpj</td><td>CNPJ do Agente de Carga ou do Operador de Remessa Postal / Expressa</td><td>Numérico(14) <strong>obrigatório</strong></td><td>query param</td><td>CNPJ (formato 99999999999999)</td><td></td></tr></tbody></table><p><code>Associação entre master(MAWB) e house(HAWB) Arquivo XML obrigatório.</code></p><h4 id=\"resposta-\">Resposta :</h4><p>Os serviços de recebimento de arquivos terão o retorno de processamento por arquivo XFNM na versão 3.00, com as seguintes informações:</p><table><thead><tr><th>Campo</th><th>Tag XML</th><th>Valor</th></tr></thead><tbody><tr><td>Message Reference ID</td><td>MessageHeaderDocument / ID</td><td>Fixo &quot;BRCUSTOMS&quot;</td></tr><tr><td>Message Name</td><td>MessageHeaderDocument / Name</td><td>Fixo &quot;Response&quot;</td></tr><tr><td>Message Type</td><td>MessageHeaderDocument / TypeCode</td><td>Fixo &quot;294&quot;</td></tr><tr><td>Message Date / Time Stamp</td><td>MessageHeaderDocument / IssueDateTime</td><td>Data / hora de processamento do arquivo - UTC time</td></tr><tr><td>Message Function</td><td>MessageHeaderDocument / PurposeCode</td><td>Fixo &quot;Response&quot;</td></tr><tr><td>Message Version</td><td>MessageHeaderDocument / VersionID</td><td>Fixo &quot;3.0&quot;</td></tr><tr><td>Sender Qualifier</td><td>MessageHeaderDocument / SenderParty / schemeID</td><td>Fixo &quot;C&quot;</td></tr><tr><td>Sender Identification</td><td>MessageHeaderDocument / SenderParty / PrimaryID</td><td>Fixo &quot;BRCUSTOMS&quot;</td></tr><tr><td>Recipient Qualifier</td><td>MessageHeaderDocument / RecipientParty / schemeID</td><td>Valor do campo Sender Qualifier (tag MessageHeaderDocument / SenderParty / schemeID) do arquivo recebido. Caso não seja passível de identificação ou for inválido ou não vier preenchido, será preenchido com “O” (letra O)</td></tr><tr><td>Recipient Identification</td><td>MessageHeaderDocument / RecipientParty / PrimaryID</td><td>Valor do campo Sender Identification (tag MessageHeaderDocument / SenderParty / PrimaryID) do arquivo recebido. Caso não seja passível de identificação ou for inválido ou não vier preenchido, será preenchido com \"NOT IDENTIFIED\".</td></tr><tr><td>Message Type</td><td>BusinessHeaderDocument / TypeCode</td><td>Valor do campo Message Type (tag MessageHeaderDocument / TypeCode) do arquivo original. Caso este campo não seja passível de identificação ou for inválido ou não vier preenchido, será preenchido com 999.</td></tr><tr><td>Message Name</td><td>BusinessHeaderDocument / Name</td><td>Valor do campo Message Name (tag MessageHeaderDocument / Name) do arquivo original. Caso este campo não seja passível de identificação ou for inválido ou não vier preenchido, será preenchido com \"NOT IDENTIFIED\".</td></tr><tr><td>Original Document Identification</td><td>BusinessHeaderDocument / ID</td><td>Valor do campo Message Reference ID (tag MessageHeaderDocument / ID) do arquivo original. Caso este campo não seja passível de identificação ou for inválido ou não vier preenchido, será preenchido com \"NOT IDENTIFIED\".</td></tr><tr><td>Response Type</td><td>BusinessHeaderDocument / StatusCode</td><td>“<em>Received</em>” , “<em>Rejected</em>” ou “<em>Processed</em>” – conforme processamento do arquivo. Na versão atual, haverá resposta apenas nas situações “<em>Received</em>” (arquivo recebido e será processado) ou “<em>Rejected</em>”(arquivo foi rejeitado)</td></tr></tbody></table><p>Os arquivos que passarem pela validação do XSD (formato estabelecido pela IATA), receberão status \"Received\", acompanhado do número de protocolo gerado para este arquivo. Este número de protocolo pode ser utilizado para verificar a situação de processamento do arquivo por meio por meio dos serviços \"Consultar Situação de Arquivos por Data\" ou \"Consultar Situação de Arquivos por número de Protocolo\".</p><p>Já os arquivos que não passarem pela validação do XSD (formato estabelecido pela IATA) receberão status “<em>Rejected</em>”, acompanhado da lista de erros encontrados.</p><p>Para arquivos com o campo Response Type igual a “<em>Received</em>”, haverá somente um registro do bloco de dados Response Status, conforme abaixo. O campo &quot;Text&quot; terá tamanho de 5000 caracteres, diferentemente do padrão estabelecido pela IATA.</p><table><thead><tr><th>Campo</th><th>Tag XML</th><th>Valor</th></tr></thead><tbody><tr><td>Category</td><td>ResponseStatus / ConditionCode</td><td>Acknowledgement</td></tr><tr><td>Text</td><td>ResponseStatus / Reason</td><td>Número do protocolo de recebimento</td></tr></tbody></table><p>Para arquivos com o campo Response Type igual a “<em>Rejected</em>”, cada ocorrência de erro conterá as seguintes informações no bloco de dados Response Status. O campo &quot;Text&quot; terá tamanho de 5000 caracteres, diferentemente do padrão estabelecido pela IATA.</p><table><thead><tr><th>Campo</th><th>Tag XML</th><th>Valor</th></tr></thead><tbody><tr><td>Category</td><td>ResponseStatus / ConditionCode</td><td>Error</td></tr><tr><td>Text</td><td>ResponseStatus / Reason</td><td>Texto contendo a linha e coluna com erro, (informando Row:&#60;número da linha&#62; &#124; Column:&#60;número da coluna&#62;) e a descrição do erro verificado.Tamanho do campo: 5000 posições. Ex: &quot;Row:7&#124;Column:20&#124;Error: cvc-complex-type.2.4.a: Invalid content was found starting with element &#39;{&quot;iata:datamodel:3&quot;:PurposeCode}&#39;. One of &#39;{&quot;iata:datamodel:3&quot;:IssueDateTime}&#39; is expected.</td></tr></tbody></table>", tags={ "Serviços de Envio de Arquivos" })
    @ApiResponses(value = { 
        @ApiResponse(code = 200, message = "Operação realizada com sucesso", response = String.class),
        @ApiResponse(code = 204, message = "Operação realizada com sucesso. Nenhum conteúdo retornado"),
        @ApiResponse(code = 400, message = "Requisição mal formatada"),
        @ApiResponse(code = 401, message = "Usuário não autenticado ou autenticação inválida"),
        @ApiResponse(code = 403, message = "Usuário não tem permissão de acesso ao recurso"),
        @ApiResponse(code = 404, message = "Recurso não encontrado"),
        @ApiResponse(code = 422, message = "Erro(s) de validação da camada de negócio"),
        @ApiResponse(code = 500, message = "Erro interno no servidor") })
    public Response doPost1(@QueryParam("TPP-ID") String TPP_ID, @HeaderParam("abi") String abi, @ApiParam(value = "" ,required=true)@Valid String body,  @NotNull @ApiParam(value = "CNPJ do Agente de Carga ou do Operador de Remessa Postal / Expressa  Tamanho: 14  Formato: NNNNNNNNNNNNNN",required=true)  @QueryParam("cnpj") String cnpj, @ApiParam(value = "JSON Web Token (JWT) contendo as informações do usuário. Este token é recuperado no parâmetro Set-Token no response da autenticação" ,required=true)@HeaderParam("Authorization") String authorization, @ApiParam(value = "Token de prevenção contra ataques CSRF. Este token é recuperado no parâmetro X-CSRF-Token no response da autenticação" ,required=true)@HeaderParam("X-CSRF-Token") String xCSRFToken);

    /**
     * Informar Conhecimento de Carga - XFWB (Freight Waybill)
     *
     * &lt;p&gt;Encaminhamento de arquivo XML para processamento de conhecimentos de cargas do tipo &lt;strong&gt;AWB (Air Waybill)&lt;/strong&gt; ou &lt;strong&gt;MAWB (Master Air Waybill)&lt;/strong&gt;. Será permitida apenas uma mensagem &lt;strong&gt;XFWB&lt;/strong&gt; por arquivo, contendo a operação &lt;em&gt;Creation&lt;/em&gt;, &lt;em&gt;Update&lt;/em&gt; ou &lt;em&gt;Deletion&lt;/em&gt;, na versão 3.00, conforme o padrão estabelecido pela IATA..&lt;p&gt;Um conhecimento de carga poderá ser informado de forma repetida contanto que não existam dois conhecimentos de carga vigentes ao mesmo tempo. Desta forma não pode haver repetição de um conhecimento de carga num período de 365 dias a partir da sua emissão.&lt;/p&gt;&lt;p&gt;Os arquivos de operação &lt;em&gt;Update&lt;/em&gt; ou &lt;em&gt;Deletion&lt;/em&gt; serão processados caso exista um arquivo com a operação &lt;em&gt;Creation&lt;/em&gt; recebido anteriormente com sucesso no sistema, tendo a mesma identificação do &lt;strong&gt;AWB/MAWB (Waybill/BusinessHeaderDocument/ID)&lt;/strong&gt; e data de emissão.&lt;/p&gt;&lt;p&gt;A alteração de um &lt;strong&gt;AWB/MAWB&lt;/strong&gt; poderá ocorrer por serviço caso não tenha ocorrido entrega final ao importador, seja esta parcial ou total. Já a exclusão do &lt;strong&gt;AWB/MAWB&lt;/strong&gt; só poderá ocorrer até o momento da chegada da  primeira parte ou do total da carga em um aeroporto brasileiro.&lt;/p&gt;&lt;p&gt;Para que um &lt;strong&gt;AWB/MAWB&lt;/strong&gt; seja considerado como manifestado em uma viagem, o conhecimento de carga &lt;strong&gt;(XFWB)&lt;/strong&gt; deve ser referenciado no arquivo da viagem &lt;strong&gt;(XFFM)&lt;/strong&gt;. Para tal, a identificação do &lt;strong&gt;AWB/MAWB&lt;/strong&gt; deve ser igual em ambos os arquivos. Além disso, tanto o arquivo &lt;strong&gt;XFFM&lt;/strong&gt; quanto o arquivo &lt;strong&gt;XFWB&lt;/strong&gt; devem se encontrar na situação &lt;em&gt;Processed&lt;/em&gt;.&lt;/p&gt;&lt;p&gt;O conhecimento de carga será vinculado à viagem de acordo com sua data de emissão, que deve ser menor ou igual à data de partida efetiva da viagem.&lt;/p&gt; &lt;p&gt;O agrupamento de informações de mercadoria (Waybill/MasterConsignment/ApplicableRating) obrigatório é o agrupamento do tipo &amp;quot;F&amp;quot; (Waybill/MasterConsignment/ApplicableRating/TypeCode), que se refere ao valor de face.&lt;/p&gt;&lt;p&gt;O agrupamento de informações de forma de pagamento do frete (Waybill/MasterConsignment/ApplicableTotalRating/ApplicablePrepaidCollectMonetarySummation/PrepaidIndicator) poderá ter no máximo duas ocorrências, sendo uma prepaid e a outra collect.&lt;/p&gt;&lt;p&gt;Os conhecimentos de carga que forem informados no conhecimento, deverão ter código de classificação de mercadoria &lt;strong&gt;(NCM)&lt;/strong&gt; com 2, 4, 6 ou 8 posições para serem aceitos(Waybill/MasterConsignment/ApplicableRating/IncludedMasterConsignmentItem/TypeCode).&lt;/p&gt;&lt;p&gt;Todas as unidades de medida de peso deverão ser informadas como unidades de medida de massa.&lt;/p&gt;&lt;p&gt;Todos os códigos de aeroportos informados no sistema devem ser informados com 3 caracteres, não sendo aceito código UNLOCODE de 5 caracteres.&lt;/p&gt;&lt;p&gt;De acordo com a necessidade da Receita Federal do Brasil, os campos abaixo são de informação obrigatória. Caso o arquivo não apresente as informações a seguir, ele será rejeitado em tempo de processamento.&lt;/p&gt;    &lt;p&gt;&lt;strong&gt;Número Total de Volumes&lt;/strong&gt;&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;WAYBILL SUMMARY/Total number of pieces&lt;/td&gt;&lt;td&gt;Waybill/MasterConsignment/TotalPieceQuantity&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;Peso Bruto Total&lt;/strong&gt;&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;WAYBILL SUMMARY/Total Gross Weight&lt;/td&gt;&lt;td&gt;Waybill/MasterConsignment/IncludedTareGrossWeightMeasure&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;Peso Bruto Total - Unidade de Medida&lt;/strong&gt;&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;WAYBILL SUMMARY/Total Gross Weight Unit of Measurement&lt;/td&gt;&lt;td&gt;Waybill/MasterConsignment/IncludedTareGrossWeightMeasure (unit code)&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;Descrição das Mercadorias&lt;/strong&gt; - Deve ser informado ao menos uma vez por arquivo&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;WAYBILL BODY / Rating Type / Rating Type Indicator / Item Details / Item Description&lt;/td&gt;&lt;td&gt;Waybill / MasterConsignment / ApplicableRating / IncludedMasterConsignmentItem / NatureIdentificationTransportCargo / Identification&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;Valor Total do Frete&lt;/strong&gt;&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;WAYBILL SUMMARY / Waybill Totals / Rating Type Indicator / Prepaid / Collect Indicator / Total Charge Summary&lt;/td&gt;&lt;td&gt;Waybill / MasterConsignment / ApplicableTotalRating / ApplicablePrepaidCollectMonetarySummation / GrandTotalAmount&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;Forma de Pagamento do Frete (Prepaid, Collect)&lt;/strong&gt;&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;WAYBILL SUMMARY / Waybill Totals / Rating Type Indicator / Prepaid / Collect Indicator&lt;/td&gt;&lt;td&gt;Waybill / MasterConsignment / ApplicableTotalRating / ApplicablePrepaidCollectMonetarySummation / PrepaidIndicator&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Caso o tipo de conhecimento de carga seja &lt;strong&gt;MAWB&lt;/strong&gt;, as informações de pagamento do frete e valor do frete não serão obrigatórias. Desta forma, o valor do frete para o MAWB pode ser zero.&lt;/p&gt;&lt;p&gt;A informação de identificação do consignatário não é obrigatória. Porém, caso a mesma não tenha sido informada no, &lt;strong&gt;AWB&lt;/strong&gt; até o momento da chegada da viagem, o sistema realizará um bloqueio automático na carga. Para &lt;strong&gt;MAWB&lt;/strong&gt;, não haverá bloqueio pela falta de informação da identificação do consignatário.&lt;/p&gt;&lt;p&gt;De acordo com a necessidade da Receita Federal do Brasil, existem informações que poderão ser registradas no bloco de dados &amp;quot;Other Customs Informations&amp;quot;, não sendo obrigatórias nas versões iniciais.&lt;/p&gt;&lt;p&gt;São elas:&lt;/p&gt;&lt;h4 id&#x3D;\&quot;indicador-conhecimento\&quot;&gt;Indicador de conhecimento de carga não IATA&lt;/h4&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;    &lt;th&gt;Campo&lt;/th&gt;    &lt;th&gt;Tag XML&lt;/th&gt;    &lt;th&gt;Valor&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;    &lt;td&gt;Other Customs, Security and Regulatory Control Information / Country code&lt;/td&gt;    &lt;td&gt;FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/CountryID&lt;/td&gt;    &lt;td&gt;Informar &lt;strong&gt;BR&lt;/strong&gt;&lt;/td&gt;    &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;    &lt;td&gt;Other Customs, Security and Regulatory Control Information / Information identifier&lt;/td&gt;    &lt;td&gt;FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/SubjectCode&lt;/td&gt;        &lt;td&gt;Informar &lt;strong&gt;WBI&lt;/strong&gt;&lt;/td&gt;    &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;    &lt;td&gt;Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier&lt;/td&gt;    &lt;td&gt;FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/ContendCode&lt;/td&gt;        &lt;td&gt;Informar &lt;strong&gt;DI&lt;/strong&gt;&lt;/td&gt;    &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;    &lt;td&gt;Other Customs, Security and Regulatory Control Information / Supplementary Customs, Security and Regulatory Control Information&lt;/td&gt;    &lt;td&gt;FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/Content&lt;/td&gt;        &lt;td&gt;Informar &lt;strong&gt;NON-IATA&lt;/strong&gt;&lt;/td&gt;    &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;OBS:&lt;/strong&gt;Caso seja informado um AWB ou MAWB cuja identificação não siga o padrão IATA, é obrigatório informar este indicador. Caso contrário, o arquivo será rejeitado.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Indicador de Presença de Partes e Peças de Madeira Maciça&lt;/strong&gt;&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;th&gt;Valor&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Country code&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedCustomNote / CountryID&lt;/td&gt;&lt;td&gt;informar &amp;quot;BR&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Information identifier&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedCustomNote / SubjectCode&lt;/td&gt;&lt;td&gt;Informar “OCI” - Other Custom Information&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedCustomNote / ContentCode&lt;/td&gt;&lt;td&gt;Informar “DI”&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Supplementary Customs, Security and Regulatory Control Information&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedCustomNote / Content&lt;/td&gt;&lt;td&gt;Informar “WOODEN PARTS”&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;Indicador de Não Desunitização da Carga&lt;/strong&gt;&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;th&gt;Valor&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information /Country code&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedCustomNote / CountryID&lt;/td&gt;&lt;td&gt;informar &amp;quot;BR&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Information identifier&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedCustomNote / SubjectCode&lt;/td&gt;&lt;td&gt;Informar “HDL” - Handling Information&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedCustomNote / ContentCode&lt;/td&gt;&lt;td&gt;Informar “DI”&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Supplementary Customs, Security and Regulatory Control Information&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedCustomNote / Content&lt;/td&gt;&lt;td&gt;Informar “DO NOT BREAK DOWN”&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;Obs:&lt;/strong&gt;Esta informação somente deve ser prestada caso o transportador responsável não queira a desunitização da carga (não permitindo a recepção por HAWB). Caso esta informação não seja enviada, a carga poderá ser desunitizada.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Identificação do Consignatário&lt;/strong&gt;&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;th&gt;Valor&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information /Country code&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedCustomNote / CountryID&lt;/td&gt;&lt;td&gt;informar &amp;quot;BR&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Information identifier&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedCustomNote / SubjectCode&lt;/td&gt;&lt;td&gt;informar &amp;quot;CNE&amp;quot;  consignatário&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedCustomNote / ContentCode&lt;/td&gt;&lt;td&gt;informar &amp;quot;T&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Supplementary Customs, Security and Regulatory Control Information&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedCustomNote / Content&lt;/td&gt;&lt;td&gt;&lt;p&gt;- Se for um CPF informar &amp;quot;CPF&amp;#60;número do CPF com 11 dígitos&amp;#62;&amp;quot; . Ex: CPF12345678901&lt;/p&gt; &lt;p&gt;- Se for um CNPJ informar &amp;quot;CNPJ&amp;#60;número do CNPJ com 8 ou 14 dígitos&amp;#62;&amp;quot;. Ex:CNPJ12345678901234&lt;/p&gt; &lt;p&gt;- Se for um Passaporte informar &amp;quot;PASSPORT&amp;#60;número do passaporte com até 25 posições&amp;#62;. Ex:PASSPORTC12345678.&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;RUC (Referência Única da Carga) / UCR (Unique Consignment Reference)&lt;/strong&gt;&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;th&gt;Valor&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Country code&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedCustomNote / CountryID&lt;/td&gt;&lt;td&gt;informar &amp;quot;BR&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Information identifier&lt;/td&gt;&lt;td&gt;MasterConsignment/ IncludedCustomNote / SubjectCode&lt;/td&gt;&lt;td&gt;informar &amp;quot;IMP&amp;quot;  importação&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedCustomNote / ContentCode&lt;/td&gt;&lt;td&gt;informar &amp;quot;U&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Supplementary Customs, Security and Regulatory Control Information&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedCustomNote / Content&lt;/td&gt;&lt;td&gt;informar UCR&amp;#60;número da RUC com até 32 posições&amp;#62;. Ex: UCR8BR167017161001713D0000000000004021&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;Obs:&lt;/strong&gt;Caso a informação da RUC não seja encaminhada no arquivo, o sistema gerará automaticamente um número RUC para a carga. Se a RUC for informada, deverá atender à recomendação da Organização Mundial de Aduanas (OMA) para a Unique Consignment Reference (UCR).&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Código do Recinto Aduaneiro de Destino da Carga&lt;/strong&gt;&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;th&gt;Valor&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Country code&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedCustomNote / CountryID&lt;/td&gt;&lt;td&gt;informar &amp;quot;BR&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Information identifier&lt;/td&gt;&lt;td&gt;MasterConsignment/ IncludedCustomNote / SubjectCode&lt;/td&gt;&lt;td&gt;informar &amp;quot;CCL&amp;quot; - Cargo Control Location&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedCustomNote / ContentCode&lt;/td&gt;&lt;td&gt;informar &amp;quot;M&amp;quot; - Movement Reference Number&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Supplementary Customs, Security and Regulatory Control Information&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedCustomNote / Content&lt;/td&gt;&lt;td&gt;informar &amp;quot;CUSTOMSWAREHOUSE&amp;#60;número do Código do Recinto Aduaneiro de Destino da Carga com X dígitos&amp;#62;&amp;quot;.  Ex:CUSTOMSWAREHOUSE1234567&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Todas as informações de data no arquivo devem ser encaminhadas com o fuso horário no padrão &lt;strong&gt;“YYYY-MM-DD&amp;#39;T&amp;#39;HH:mm:ss:SSS(‘+’/’-’)ZZ:ZZ”&lt;/strong&gt;.&lt;/p&gt;&lt;p&gt;A informação do fuso horário de partida ou chegada da aeronave refere-se ao fuso horário local. A data de criação do arquivo deverá ser informada com o fuso do local onde foi criado.&lt;/p&gt;&lt;h4 id&#x3D;\&quot;par-metros-de-entrada-\&quot;&gt;Parâmetros de Entrada:&lt;/h4&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Nome&lt;/th&gt;&lt;th&gt;Descrição&lt;/th&gt;&lt;th&gt;Tipo&lt;/th&gt;&lt;th&gt;Local&lt;/th&gt;&lt;th&gt;Detalhes&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Arquivo de conhecimento de carga (XFWB)&lt;/td&gt;&lt;td&gt;Conhecimentos de carga(AWB e MAWB)&lt;/td&gt;&lt;td&gt;Arquivo XML &lt;strong&gt;obrigatório&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;Body&lt;/td&gt;&lt;td&gt;Versão 3.00 da IATA - informado pelas Companhias Aéreas&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;cnpj&lt;/td&gt;&lt;td&gt;CNPJ da Companhia Aérea&lt;/td&gt;&lt;td&gt;Numérico(14) &lt;strong&gt;obrigatório&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;query param&lt;/td&gt;&lt;td&gt;CNPJ (formato 99999999999999)&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h4 id&#x3D;\&quot;resposta-\&quot;&gt;Resposta :&lt;/h4&gt;&lt;p&gt;Os serviços de recebimento de arquivos terão o retorno de processamento por arquivo XFNM na versão 3.00, com as seguintes informações:&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;th&gt;Valor&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Message Reference ID&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / ID&lt;/td&gt;&lt;td&gt;Fixo &amp;quot;BRCUSTOMS&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Message Name&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / Name&lt;/td&gt;&lt;td&gt;Fixo &amp;quot;Response&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Message Type&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / TypeCode&lt;/td&gt;&lt;td&gt;Fixo &amp;quot;294&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Message Date / Time Stamp&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / IssueDateTime&lt;/td&gt;&lt;td&gt;Data / hora de processamento do arquivo - UTC time&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Message Function&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / PurposeCode&lt;/td&gt;&lt;td&gt;Fixo &amp;quot;Response&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Message Version&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / VersionID&lt;/td&gt;&lt;td&gt;Fixo &amp;quot;3.0&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Sender Qualifier&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / SenderParty / schemeID&lt;/td&gt;&lt;td&gt;Fixo &amp;quot;C&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Sender Identification&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / SenderParty / PrimaryID&lt;/td&gt;&lt;td&gt;Fixo &amp;quot;BRCUSTOMS&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Recipient Qualifier&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / RecipientParty / schemeID&lt;/td&gt;&lt;td&gt;Valor do campo Sender Qualifier (tag  MessageHeaderDocument / SenderParty / schemeID)  do arquivo recebido. Caso não seja passível de identificação ou for inválido ou não vier preenchido, será preenchido com “O’ (letra O)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Recipient Identification&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / RecipientParty / PrimaryID&lt;/td&gt;&lt;td&gt;Valor do campo Sender Identification (tag MessageHeaderDocument / SenderParty / PrimaryID) do arquivo recebido. Caso não seja passível de identificação ou for inválido ou não vier preenchido, será preenchido com &amp;quot;NOT IDENTIFIED&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Message Type&lt;/td&gt;&lt;td&gt;BusinessHeaderDocument / TypeCode&lt;/td&gt;&lt;td&gt;Valor do campo Message Type (tag MessageHeaderDocument / TypeCode) do arquivo original. Caso este campo não seja passível de identificação ou for inválido ou não vier preenchido,  será preenchido com 999.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Message Name&lt;/td&gt;&lt;td&gt;BusinessHeaderDocument / Name&lt;/td&gt;&lt;td&gt;Valor do campo Message Name (tag MessageHeaderDocument / Name) do arquivo original. Caso este campo não seja passível de identificação ou for inválido ou não vier preenchido, será preenchido com &amp;quot;NOT IDENTIFIED&amp;quot;.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Original Document Identification&lt;/td&gt;&lt;td&gt;BusinessHeaderDocument / ID&lt;/td&gt;&lt;td&gt;Valor do campo Message Reference ID (tag MessageHeaderDocument / ID) do arquivo original. Caso este campo não seja passível de identificação ou for inválido  ou não vier preenchido, será preenchido com &amp;quot;NOT IDENTIFIED&amp;quot;.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Response Type&lt;/td&gt;&lt;td&gt;BusinessHeaderDocument / StatusCode&lt;/td&gt;&lt;td&gt;“&lt;em&gt;Received&lt;/em&gt;” , “&lt;em&gt;Rejected&lt;/em&gt;” ou “&lt;em&gt;Processed&lt;/em&gt;” – conforme processamento do arquivo. Na versão atual, haverá resposta apenas nas situações “&lt;em&gt;Received&lt;/em&gt;” (arquivo recebido e será processado) ou “&lt;em&gt;Rejected&lt;/em&gt;”(arquivo foi rejeitado)&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Os arquivos que passarem pela validação do XSD (formato estabelecido pela IATA), receberão status &amp;quot;&lt;em&gt;Received&lt;/em&gt;&amp;quot;, acompanhado do número de protocolo gerado para este arquivo. Este número de protocolo pode ser utilizado para verificar a situação de processamento do arquivo por meio dos serviços &amp;quot;Consultar Situação de Arquivos por Data&amp;quot; ou &amp;quot;Consultar Situação de Arquivos por número de Protocolo&amp;quot;.&lt;/p&gt;&lt;p&gt;Já os arquivos que não passarem pela validação do XSD (formato estabelecido pela IATA) receberão status &amp;quot;&lt;em&gt;Rejected&lt;/em&gt;&amp;quot;, acompanhado da lista de erros encontrados.&lt;/p&gt;&lt;p&gt;Para arquivos com o campo Response Type igual a &amp;quot;&lt;em&gt;Received&lt;/em&gt;&amp;quot;, haverá somente um registro do bloco de dados Response Status, conforme abaixo. O campo &amp;quot;Text&amp;quot; terá tamanho de 5000 caracteres, diferentemente do padrão estabelecido pela IATA.&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;th&gt;Valor&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Category ResponseStatus / ConditionCode&lt;/td&gt;&lt;td&gt;Acknowledgement&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Text&lt;/td&gt;&lt;td&gt;ResponseStatus / Reason&lt;/td&gt;&lt;td&gt;Número do protocolo de recebimento&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Para arquivos com o campo Response Type igual a “&lt;em&gt;Rejected&lt;/em&gt;”, cada ocorrência de erro conterá as seguintes informações no bloco de dados Response Status. O campo &amp;quot;Text&amp;quot; terá tamanho de 5000 caracteres, diferentemente do padrão estabelecido pela IATA.&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;th&gt;Valor&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Category&lt;/td&gt;&lt;td&gt;ResponseStatus / ConditionCode&lt;/td&gt;&lt;td&gt;Error&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Text&lt;/td&gt;&lt;td&gt;ResponseStatus / Reason&lt;/td&gt;&lt;td&gt;Texto contendo a linha e coluna com erro, (informando Row:&amp;#60;número da linha&amp;#62; &amp;#124; Column:&amp;#60;número da coluna&amp;#62;) e a descrição do erro verificado.Tamanho do campo: 5000 posições. Ex: &amp;quot;Row:7&amp;#124;Column:20&amp;#124;Error: cvc-complex-type.2.4.a: Invalid content was found starting with element &amp;#39;{&amp;quot;iata:datamodel:3&amp;quot;:PurposeCode}&amp;#39;. One of &amp;#39;{&amp;quot;iata:datamodel:3&amp;quot;:IssueDateTime}&amp;#39; is expected.&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
     *
     */
    @POST
    @Path("/ext/incoming/xfwb")
    @Consumes({ "application/xml" })
    @Produces({ "application/xml" })
    @ApiOperation(value = "Informar Conhecimento de Carga - XFWB (Freight Waybill)", notes = "<p>Encaminhamento de arquivo XML para processamento de conhecimentos de cargas do tipo <strong>AWB (Air Waybill)</strong> ou <strong>MAWB (Master Air Waybill)</strong>. Será permitida apenas uma mensagem <strong>XFWB</strong> por arquivo, contendo a operação <em>Creation</em>, <em>Update</em> ou <em>Deletion</em>, na versão 3.00, conforme o padrão estabelecido pela IATA..<p>Um conhecimento de carga poderá ser informado de forma repetida contanto que não existam dois conhecimentos de carga vigentes ao mesmo tempo. Desta forma não pode haver repetição de um conhecimento de carga num período de 365 dias a partir da sua emissão.</p><p>Os arquivos de operação <em>Update</em> ou <em>Deletion</em> serão processados caso exista um arquivo com a operação <em>Creation</em> recebido anteriormente com sucesso no sistema, tendo a mesma identificação do <strong>AWB/MAWB (Waybill/BusinessHeaderDocument/ID)</strong> e data de emissão.</p><p>A alteração de um <strong>AWB/MAWB</strong> poderá ocorrer por serviço caso não tenha ocorrido entrega final ao importador, seja esta parcial ou total. Já a exclusão do <strong>AWB/MAWB</strong> só poderá ocorrer até o momento da chegada da  primeira parte ou do total da carga em um aeroporto brasileiro.</p><p>Para que um <strong>AWB/MAWB</strong> seja considerado como manifestado em uma viagem, o conhecimento de carga <strong>(XFWB)</strong> deve ser referenciado no arquivo da viagem <strong>(XFFM)</strong>. Para tal, a identificação do <strong>AWB/MAWB</strong> deve ser igual em ambos os arquivos. Além disso, tanto o arquivo <strong>XFFM</strong> quanto o arquivo <strong>XFWB</strong> devem se encontrar na situação <em>Processed</em>.</p><p>O conhecimento de carga será vinculado à viagem de acordo com sua data de emissão, que deve ser menor ou igual à data de partida efetiva da viagem.</p> <p>O agrupamento de informações de mercadoria (Waybill/MasterConsignment/ApplicableRating) obrigatório é o agrupamento do tipo &quot;F&quot; (Waybill/MasterConsignment/ApplicableRating/TypeCode), que se refere ao valor de face.</p><p>O agrupamento de informações de forma de pagamento do frete (Waybill/MasterConsignment/ApplicableTotalRating/ApplicablePrepaidCollectMonetarySummation/PrepaidIndicator) poderá ter no máximo duas ocorrências, sendo uma prepaid e a outra collect.</p><p>Os conhecimentos de carga que forem informados no conhecimento, deverão ter código de classificação de mercadoria <strong>(NCM)</strong> com 2, 4, 6 ou 8 posições para serem aceitos(Waybill/MasterConsignment/ApplicableRating/IncludedMasterConsignmentItem/TypeCode).</p><p>Todas as unidades de medida de peso deverão ser informadas como unidades de medida de massa.</p><p>Todos os códigos de aeroportos informados no sistema devem ser informados com 3 caracteres, não sendo aceito código UNLOCODE de 5 caracteres.</p><p>De acordo com a necessidade da Receita Federal do Brasil, os campos abaixo são de informação obrigatória. Caso o arquivo não apresente as informações a seguir, ele será rejeitado em tempo de processamento.</p>    <p><strong>Número Total de Volumes</strong></p><table><thead><tr><th>Campo</th><th>Tag XML</th></tr></thead><tbody><tr><td>WAYBILL SUMMARY/Total number of pieces</td><td>Waybill/MasterConsignment/TotalPieceQuantity</td></tr></tbody></table><p><strong>Peso Bruto Total</strong></p><table><thead><tr><th>Campo</th><th>Tag XML</th></tr></thead><tbody><tr><td>WAYBILL SUMMARY/Total Gross Weight</td><td>Waybill/MasterConsignment/IncludedTareGrossWeightMeasure</td></tr></tbody></table><p><strong>Peso Bruto Total - Unidade de Medida</strong></p><table><thead><tr><th>Campo</th><th>Tag XML</th></tr></thead><tbody><tr><td>WAYBILL SUMMARY/Total Gross Weight Unit of Measurement</td><td>Waybill/MasterConsignment/IncludedTareGrossWeightMeasure (unit code)</td></tr></tbody></table><p><strong>Descrição das Mercadorias</strong> - Deve ser informado ao menos uma vez por arquivo</p><table><thead><tr><th>Campo</th><th>Tag XML</th></tr></thead><tbody><tr><td>WAYBILL BODY / Rating Type / Rating Type Indicator / Item Details / Item Description</td><td>Waybill / MasterConsignment / ApplicableRating / IncludedMasterConsignmentItem / NatureIdentificationTransportCargo / Identification</td></tr></tbody></table><p><strong>Valor Total do Frete</strong></p><table><thead><tr><th>Campo</th><th>Tag XML</th></tr></thead><tbody><tr><td>WAYBILL SUMMARY / Waybill Totals / Rating Type Indicator / Prepaid / Collect Indicator / Total Charge Summary</td><td>Waybill / MasterConsignment / ApplicableTotalRating / ApplicablePrepaidCollectMonetarySummation / GrandTotalAmount</td></tr></tbody></table><p><strong>Forma de Pagamento do Frete (Prepaid, Collect)</strong></p><table><thead><tr><th>Campo</th><th>Tag XML</th></tr></thead><tbody><tr><td>WAYBILL SUMMARY / Waybill Totals / Rating Type Indicator / Prepaid / Collect Indicator</td><td>Waybill / MasterConsignment / ApplicableTotalRating / ApplicablePrepaidCollectMonetarySummation / PrepaidIndicator</td></tr></tbody></table><p>Caso o tipo de conhecimento de carga seja <strong>MAWB</strong>, as informações de pagamento do frete e valor do frete não serão obrigatórias. Desta forma, o valor do frete para o MAWB pode ser zero.</p><p>A informação de identificação do consignatário não é obrigatória. Porém, caso a mesma não tenha sido informada no, <strong>AWB</strong> até o momento da chegada da viagem, o sistema realizará um bloqueio automático na carga. Para <strong>MAWB</strong>, não haverá bloqueio pela falta de informação da identificação do consignatário.</p><p>De acordo com a necessidade da Receita Federal do Brasil, existem informações que poderão ser registradas no bloco de dados &quot;Other Customs Informations&quot;, não sendo obrigatórias nas versões iniciais.</p><p>São elas:</p><h4 id=\"indicador-conhecimento\">Indicador de conhecimento de carga não IATA</h4><table><thead><tr>    <th>Campo</th>    <th>Tag XML</th>    <th>Valor</th></tr></thead><tbody><tr>    <td>Other Customs, Security and Regulatory Control Information / Country code</td>    <td>FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/CountryID</td>    <td>Informar <strong>BR</strong></td>    <td></td></tr><tr>    <td>Other Customs, Security and Regulatory Control Information / Information identifier</td>    <td>FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/SubjectCode</td>        <td>Informar <strong>WBI</strong></td>    <td></td></tr><tr>    <td>Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier</td>    <td>FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/ContendCode</td>        <td>Informar <strong>DI</strong></td>    <td></td></tr><tr>    <td>Other Customs, Security and Regulatory Control Information / Supplementary Customs, Security and Regulatory Control Information</td>    <td>FlightManifest/ArrivalEvent/AssociatedTransportCargo/IncludedMasterConsignment/IncludedCustomsNote/Content</td>        <td>Informar <strong>NON-IATA</strong></td>    <td></td></tr></tbody></table><p><strong>OBS:</strong>Caso seja informado um AWB ou MAWB cuja identificação não siga o padrão IATA, é obrigatório informar este indicador. Caso contrário, o arquivo será rejeitado.</p><p><strong>Indicador de Presença de Partes e Peças de Madeira Maciça</strong></p><table><thead><tr><th>Campo</th><th>Tag XML</th><th>Valor</th></tr></thead><tbody><tr><td>Other Customs, Security and Regulatory Control Information / Country code</td><td>MasterConsignment / IncludedCustomNote / CountryID</td><td>informar &quot;BR&quot;</td></tr><tr><td>Other Customs, Security and Regulatory Control Information / Information identifier</td><td>MasterConsignment / IncludedCustomNote / SubjectCode</td><td>Informar “OCI” - Other Custom Information</td></tr><tr><td>Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier</td><td>MasterConsignment / IncludedCustomNote / ContentCode</td><td>Informar “DI”</td></tr><tr><td>Other Customs, Security and Regulatory Control Information / Supplementary Customs, Security and Regulatory Control Information</td><td>MasterConsignment / IncludedCustomNote / Content</td><td>Informar “WOODEN PARTS”</td></tr></tbody></table><p><strong>Indicador de Não Desunitização da Carga</strong></p><table><thead><tr><th>Campo</th><th>Tag XML</th><th>Valor</th></tr></thead><tbody><tr><td>Other Customs, Security and Regulatory Control Information /Country code</td><td>MasterConsignment / IncludedCustomNote / CountryID</td><td>informar &quot;BR&quot;</td></tr><tr><td>Other Customs, Security and Regulatory Control Information / Information identifier</td><td>MasterConsignment / IncludedCustomNote / SubjectCode</td><td>Informar “HDL” - Handling Information</td></tr><tr><td>Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier</td><td>MasterConsignment / IncludedCustomNote / ContentCode</td><td>Informar “DI”</td></tr><tr><td>Other Customs, Security and Regulatory Control Information / Supplementary Customs, Security and Regulatory Control Information</td><td>MasterConsignment / IncludedCustomNote / Content</td><td>Informar “DO NOT BREAK DOWN”</td></tr></tbody></table><p><strong>Obs:</strong>Esta informação somente deve ser prestada caso o transportador responsável não queira a desunitização da carga (não permitindo a recepção por HAWB). Caso esta informação não seja enviada, a carga poderá ser desunitizada.</p><p><strong>Identificação do Consignatário</strong></p><table><thead><tr><th>Campo</th><th>Tag XML</th><th>Valor</th></tr></thead><tbody><tr><td>Other Customs, Security and Regulatory Control Information /Country code</td><td>MasterConsignment / IncludedCustomNote / CountryID</td><td>informar &quot;BR&quot;</td></tr><tr><td>Other Customs, Security and Regulatory Control Information / Information identifier</td><td>MasterConsignment / IncludedCustomNote / SubjectCode</td><td>informar &quot;CNE&quot;  consignatário</td></tr><tr><td>Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier</td><td>MasterConsignment / IncludedCustomNote / ContentCode</td><td>informar &quot;T&quot;</td></tr><tr><td>Other Customs, Security and Regulatory Control Information / Supplementary Customs, Security and Regulatory Control Information</td><td>MasterConsignment / IncludedCustomNote / Content</td><td><p>- Se for um CPF informar &quot;CPF&#60;número do CPF com 11 dígitos&#62;&quot; . Ex: CPF12345678901</p> <p>- Se for um CNPJ informar &quot;CNPJ&#60;número do CNPJ com 8 ou 14 dígitos&#62;&quot;. Ex:CNPJ12345678901234</p> <p>- Se for um Passaporte informar &quot;PASSPORT&#60;número do passaporte com até 25 posições&#62;. Ex:PASSPORTC12345678.</p></td></tr></tbody></table><p><strong>RUC (Referência Única da Carga) / UCR (Unique Consignment Reference)</strong></p><table><thead><tr><th>Campo</th><th>Tag XML</th><th>Valor</th></tr></thead><tbody><tr><td>Other Customs, Security and Regulatory Control Information / Country code</td><td>MasterConsignment / IncludedCustomNote / CountryID</td><td>informar &quot;BR&quot;</td></tr><tr><td>Other Customs, Security and Regulatory Control Information / Information identifier</td><td>MasterConsignment/ IncludedCustomNote / SubjectCode</td><td>informar &quot;IMP&quot;  importação</td></tr><tr><td>Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier</td><td>MasterConsignment / IncludedCustomNote / ContentCode</td><td>informar &quot;U&quot;</td></tr><tr><td>Other Customs, Security and Regulatory Control Information / Supplementary Customs, Security and Regulatory Control Information</td><td>MasterConsignment / IncludedCustomNote / Content</td><td>informar UCR&#60;número da RUC com até 32 posições&#62;. Ex: UCR8BR167017161001713D0000000000004021</td></tr></tbody></table><p><strong>Obs:</strong>Caso a informação da RUC não seja encaminhada no arquivo, o sistema gerará automaticamente um número RUC para a carga. Se a RUC for informada, deverá atender à recomendação da Organização Mundial de Aduanas (OMA) para a Unique Consignment Reference (UCR).</p><p><strong>Código do Recinto Aduaneiro de Destino da Carga</strong></p><table><thead><tr><th>Campo</th><th>Tag XML</th><th>Valor</th></tr></thead><tbody><tr><td>Other Customs, Security and Regulatory Control Information / Country code</td><td>MasterConsignment / IncludedCustomNote / CountryID</td><td>informar &quot;BR&quot;</td></tr><tr><td>Other Customs, Security and Regulatory Control Information / Information identifier</td><td>MasterConsignment/ IncludedCustomNote / SubjectCode</td><td>informar &quot;CCL&quot; - Cargo Control Location</td></tr><tr><td>Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier</td><td>MasterConsignment / IncludedCustomNote / ContentCode</td><td>informar &quot;M&quot; - Movement Reference Number</td></tr><tr><td>Other Customs, Security and Regulatory Control Information / Supplementary Customs, Security and Regulatory Control Information</td><td>MasterConsignment / IncludedCustomNote / Content</td><td>informar &quot;CUSTOMSWAREHOUSE&#60;número do Código do Recinto Aduaneiro de Destino da Carga com X dígitos&#62;&quot;.  Ex:CUSTOMSWAREHOUSE1234567</td></tr></tbody></table><p>Todas as informações de data no arquivo devem ser encaminhadas com o fuso horário no padrão <strong>“YYYY-MM-DD&#39;T&#39;HH:mm:ss:SSS(‘+’/’-’)ZZ:ZZ”</strong>.</p><p>A informação do fuso horário de partida ou chegada da aeronave refere-se ao fuso horário local. A data de criação do arquivo deverá ser informada com o fuso do local onde foi criado.</p><h4 id=\"par-metros-de-entrada-\">Parâmetros de Entrada:</h4><table><thead><tr><th>Nome</th><th>Descrição</th><th>Tipo</th><th>Local</th><th>Detalhes</th></tr></thead><tbody><tr><td>Arquivo de conhecimento de carga (XFWB)</td><td>Conhecimentos de carga(AWB e MAWB)</td><td>Arquivo XML <strong>obrigatório</strong></td><td>Body</td><td>Versão 3.00 da IATA - informado pelas Companhias Aéreas</td><td></td></tr><tr><td>cnpj</td><td>CNPJ da Companhia Aérea</td><td>Numérico(14) <strong>obrigatório</strong></td><td>query param</td><td>CNPJ (formato 99999999999999)</td><td></td></tr></tbody></table><h4 id=\"resposta-\">Resposta :</h4><p>Os serviços de recebimento de arquivos terão o retorno de processamento por arquivo XFNM na versão 3.00, com as seguintes informações:</p><table><thead><tr><th>Campo</th><th>Tag XML</th><th>Valor</th></tr></thead><tbody><tr><td>Message Reference ID</td><td>MessageHeaderDocument / ID</td><td>Fixo &quot;BRCUSTOMS&quot;</td></tr><tr><td>Message Name</td><td>MessageHeaderDocument / Name</td><td>Fixo &quot;Response&quot;</td></tr><tr><td>Message Type</td><td>MessageHeaderDocument / TypeCode</td><td>Fixo &quot;294&quot;</td></tr><tr><td>Message Date / Time Stamp</td><td>MessageHeaderDocument / IssueDateTime</td><td>Data / hora de processamento do arquivo - UTC time</td></tr><tr><td>Message Function</td><td>MessageHeaderDocument / PurposeCode</td><td>Fixo &quot;Response&quot;</td></tr><tr><td>Message Version</td><td>MessageHeaderDocument / VersionID</td><td>Fixo &quot;3.0&quot;</td></tr><tr><td>Sender Qualifier</td><td>MessageHeaderDocument / SenderParty / schemeID</td><td>Fixo &quot;C&quot;</td></tr><tr><td>Sender Identification</td><td>MessageHeaderDocument / SenderParty / PrimaryID</td><td>Fixo &quot;BRCUSTOMS&quot;</td></tr><tr><td>Recipient Qualifier</td><td>MessageHeaderDocument / RecipientParty / schemeID</td><td>Valor do campo Sender Qualifier (tag  MessageHeaderDocument / SenderParty / schemeID)  do arquivo recebido. Caso não seja passível de identificação ou for inválido ou não vier preenchido, será preenchido com “O’ (letra O)</td></tr><tr><td>Recipient Identification</td><td>MessageHeaderDocument / RecipientParty / PrimaryID</td><td>Valor do campo Sender Identification (tag MessageHeaderDocument / SenderParty / PrimaryID) do arquivo recebido. Caso não seja passível de identificação ou for inválido ou não vier preenchido, será preenchido com &quot;NOT IDENTIFIED&quot;</td></tr><tr><td>Message Type</td><td>BusinessHeaderDocument / TypeCode</td><td>Valor do campo Message Type (tag MessageHeaderDocument / TypeCode) do arquivo original. Caso este campo não seja passível de identificação ou for inválido ou não vier preenchido,  será preenchido com 999.</td></tr><tr><td>Message Name</td><td>BusinessHeaderDocument / Name</td><td>Valor do campo Message Name (tag MessageHeaderDocument / Name) do arquivo original. Caso este campo não seja passível de identificação ou for inválido ou não vier preenchido, será preenchido com &quot;NOT IDENTIFIED&quot;.</td></tr><tr><td>Original Document Identification</td><td>BusinessHeaderDocument / ID</td><td>Valor do campo Message Reference ID (tag MessageHeaderDocument / ID) do arquivo original. Caso este campo não seja passível de identificação ou for inválido  ou não vier preenchido, será preenchido com &quot;NOT IDENTIFIED&quot;.</td></tr><tr><td>Response Type</td><td>BusinessHeaderDocument / StatusCode</td><td>“<em>Received</em>” , “<em>Rejected</em>” ou “<em>Processed</em>” – conforme processamento do arquivo. Na versão atual, haverá resposta apenas nas situações “<em>Received</em>” (arquivo recebido e será processado) ou “<em>Rejected</em>”(arquivo foi rejeitado)</td></tr></tbody></table><p>Os arquivos que passarem pela validação do XSD (formato estabelecido pela IATA), receberão status &quot;<em>Received</em>&quot;, acompanhado do número de protocolo gerado para este arquivo. Este número de protocolo pode ser utilizado para verificar a situação de processamento do arquivo por meio dos serviços &quot;Consultar Situação de Arquivos por Data&quot; ou &quot;Consultar Situação de Arquivos por número de Protocolo&quot;.</p><p>Já os arquivos que não passarem pela validação do XSD (formato estabelecido pela IATA) receberão status &quot;<em>Rejected</em>&quot;, acompanhado da lista de erros encontrados.</p><p>Para arquivos com o campo Response Type igual a &quot;<em>Received</em>&quot;, haverá somente um registro do bloco de dados Response Status, conforme abaixo. O campo &quot;Text&quot; terá tamanho de 5000 caracteres, diferentemente do padrão estabelecido pela IATA.</p><table><thead><tr><th>Campo</th><th>Tag XML</th><th>Valor</th></tr></thead><tbody><tr><td>Category ResponseStatus / ConditionCode</td><td>Acknowledgement</td></tr><tr><td>Text</td><td>ResponseStatus / Reason</td><td>Número do protocolo de recebimento</td></tr></tbody></table><p>Para arquivos com o campo Response Type igual a “<em>Rejected</em>”, cada ocorrência de erro conterá as seguintes informações no bloco de dados Response Status. O campo &quot;Text&quot; terá tamanho de 5000 caracteres, diferentemente do padrão estabelecido pela IATA.</p><table><thead><tr><th>Campo</th><th>Tag XML</th><th>Valor</th></tr></thead><tbody><tr><td>Category</td><td>ResponseStatus / ConditionCode</td><td>Error</td></tr><tr><td>Text</td><td>ResponseStatus / Reason</td><td>Texto contendo a linha e coluna com erro, (informando Row:&#60;número da linha&#62; &#124; Column:&#60;número da coluna&#62;) e a descrição do erro verificado.Tamanho do campo: 5000 posições. Ex: &quot;Row:7&#124;Column:20&#124;Error: cvc-complex-type.2.4.a: Invalid content was found starting with element &#39;{&quot;iata:datamodel:3&quot;:PurposeCode}&#39;. One of &#39;{&quot;iata:datamodel:3&quot;:IssueDateTime}&#39; is expected.</td></tr></tbody></table>", tags={ "Serviços de Envio de Arquivos" })
    @ApiResponses(value = { 
        @ApiResponse(code = 200, message = "Operação realizada com sucesso", response = String.class),
        @ApiResponse(code = 204, message = "Operação realizada com sucesso. Nenhum conteúdo retornado"),
        @ApiResponse(code = 400, message = "Requisição mal formatada"),
        @ApiResponse(code = 401, message = "Usuário não autenticado ou autenticação inválida"),
        @ApiResponse(code = 403, message = "Usuário não tem permissão de acesso ao recurso"),
        @ApiResponse(code = 404, message = "Recurso não encontrado"),
        @ApiResponse(code = 422, message = "Erro(s) de validação da camada de negócio"),
        @ApiResponse(code = 500, message = "Erro interno no servidor") })
    public Response doPost2(@QueryParam("TPP-ID") String TPP_ID, @HeaderParam("abi") String abi, @ApiParam(value = "" ,required=true)@Valid String body,  @NotNull @ApiParam(value = "CNPJ da Companhia Aérea  Tamanho: 14  Formato: NNNNNNNNNNNNNN",required=true)  @QueryParam("cnpj") String cnpj, @ApiParam(value = "JSON Web Token (JWT) contendo as informações do usuário. Este token é recuperado no parâmetro Set-Token no response da autenticação" ,required=true)@HeaderParam("Authorization") String authorization, @ApiParam(value = "Token de prevenção contra ataques CSRF. Este token é recuperado no parâmetro X-CSRF-Token no response da autenticação" ,required=true)@HeaderParam("X-CSRF-Token") String xCSRFToken);

    /**
     * Informar Conhecimento de Carga House - XFZB (House Air Waybill)
     *
     * &lt;p&gt;Encaminhamento de arquivo XML para processamento de conhecimentos de cargas house (HAWB - &lt;em&gt;House Air Waybill&lt;/em&gt;). Será permitida apenas uma mensagem XFZB por arquivo, contendo a operação de &lt;em&gt;Creation&lt;/em&gt;, &lt;em&gt;Update&lt;/em&gt; ou &lt;em&gt;Deletion&lt;/em&gt;, conforme o padrão IATA.&lt;p&gt;Os arquivos de operação Update ou Deletion serão processados, caso exista um arquivo de Creation recebido anteriormente com sucesso no sistema, tendo a mesma identificação do conhecimento de carga do HAWB. A identificação do conhecimento de carga HAWB é feita pelo conjunto da informação de número do HAWB (HouseWaybill/BusinessHeaderDocument/ID) e aeroporto de origem da carga do HAWB (HouseWaybill/MasterConsignment/IncludedHouseConsignment/OriginLocation/ID).&lt;/p&gt;&lt;p&gt;Para que um HAWB seja considerado associado a um MAWB(XFWB), deve haver arquivo de associação MAWB/HAWB(XFHL), que referencie o HAWB (XFZB), por meio de suas respectivas identificações do MAWB/HAWB e aeroporto de origem da carga. Além disso, todos os arquivos (XFHL, XFWB e XFZB) devem se encontrar na situação &amp;quot;&lt;em&gt;Processed&lt;/em&gt;&amp;quot;.&lt;/p&gt;&lt;p&gt;Um arquivo XFZB que está sendo enviado com a operação Creation pode ser encaminhado por este serviço a qualquer momento, inclusive após a chegada da aeronave. Já um arquivo que tenha a operação Update ou Deletion, somente será aceito pelo serviço até a informação da chegada da aeronave e caso a carga não esteja vinculada a um documento de saída. No caso da exclusão, esta operação também não será permitida caso o HAWB já esteja vinculado a seu MAWB, conforme a regra de associação acima mencionada. Nessas situações, as operações de retificação ou exclusão somente poderão ser realizadas por funcionalidades de tela (web) a serem disponibilizadas futuramente, e não mais por arquivo XML. A funcionalidade de exclusão será restrita para uso da RFB.&lt;/p&gt;&lt;p&gt;Os valores totais de HAWB a serem informados, serão obrigatórios somente com relação ao valor de face (&lt;strong&gt;&amp;quot;F&amp;quot;&lt;/strong&gt;).&lt;/p&gt;&lt;p&gt;De acordo com a necessidade da Receita Federal do Brasil, os campos abaixo são de informação obrigatória. Caso o arquivo não apresente as informações a seguir, ele será rejeitado em tempo de processamento.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Número Total de Volumes&lt;/strong&gt;&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;HOUSE WAYBILL SUMMARY /Total number of pieces&lt;/td&gt;&lt;td&gt;HouseWaybill / MasterConsignment / IncludedHouseConsignment  / TotalPieceQuantity&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;Peso Bruto Total&lt;/strong&gt;&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;HOUSE WAYBILL SUMMARY / Total Gross Weight&lt;/td&gt;&lt;td&gt;HouseWaybill / MasterConsignment / IncludedHouseConsignment / IncludedTareGrossWeightMeasure&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;Peso Bruto Total - Unidade de Medida&lt;/strong&gt;&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;HOUSE WAYBILL SUMMARY / Total Gross Weight&lt;/td&gt;&lt;td&gt;HouseWaybill / MasterConsignment / IncludedHouseConsignment / IncludedTareGrossWeightMeasure (unit code)&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;Descrição das Mercadorias&lt;/strong&gt;&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;HOUSE WAYBILL SUMMARY / Description of Goods&lt;/td&gt;&lt;td&gt;HouseWaybill / MasterConsignment / IncludedHouseConsignment / SummaryDescription&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;Valor Total do Frete PREPAID&lt;/strong&gt;&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;HOUSE WAYBILL SUMMARY / House Waybill Totals / Total Prepaid Charge Summary Amount&lt;/td&gt;&lt;td&gt;HouseWaybill / MasterConsignment / IncludedHouseConsignment / TotalPrepaidChargeAmount&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;Valor Total do Frete COLLECT&lt;/strong&gt;&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;HOUSE WAYBILL SUMMARY / House Waybill Totals / Total Collect Charge Summary Amount&lt;/td&gt;&lt;td&gt;HouseWaybill / MasterConsignment / IncludedHouseConsignment / TotalCollectChargeAmount&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;A informação de identificação do consignatário não é obrigatória, porém, caso a mesma não conste do HAWB no momento da chegada da viagem, o sistema realizará um bloqueio automático na carga.&lt;/p&gt;&lt;p&gt;De acordo com a necessidade da Receita Federal do Brasil, existem informações que poderão ser registradas no bloco de dados \&quot;Other Customs Informations\&quot;, não sendo obrigatórias nas versões iniciais.&lt;/p&gt;&lt;p&gt;São elas:&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Indicador de Presença de Partes e Peças de Madeira Maciça&lt;/strong&gt;&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;th&gt;Valor&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information /Country code&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedCustomNote / CountryID&lt;/td&gt;&lt;td&gt;informar &amp;quot;BR&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Information identifier&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedCustomNote / SubjectCode&lt;/td&gt;&lt;td&gt;Informar “OCI” - Other Custom Information&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedCustomNote / ContentCode&lt;/td&gt;&lt;td&gt;Informar “DI”&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Supplementary Customs, Security and Regulatory Control Information&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedCustomNote / Content&lt;/td&gt;&lt;td&gt;Informar &amp;quot;WOODEN PARTS&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;Identificação do Consignatário&lt;/strong&gt;&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;th&gt;Valor&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Country code&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedHouseConsignment / IncludedCustomNote / CountryID&lt;/td&gt;&lt;td&gt;- informar &amp;quot;BR&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Information identifier&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedHouseConsignment / IncludedCustomNote / SubjectCode&lt;/td&gt;&lt;td&gt;informar &amp;quot;CNE&amp;quot; consignatário&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedHouseConsignment / IncludedCustomNote / ContentCode&lt;/td&gt;&lt;td&gt;informar &amp;quot;T&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information /Supplementary Customs, Security and Regulatory Control Information&lt;/td&gt;&lt;td&gt;MasterConsignment /  IncludedHouseConsignment / IncludedCustomNote / Content&lt;/td&gt;&lt;td&gt;&lt;p&gt;- Se for um CPF informar &amp;quot;CPF&amp;#60;número do CPF com 11 dígitos&amp;#62;&amp;quot; . Ex: CPF12345678901&lt;/p&gt; &lt;p&gt;- Se for um CNPJ informar &amp;quot;CNPJ&amp;#60;número do CNPJ com 8 ou 14 dígitos&amp;#62;&amp;quot;. Ex:CNPJ12345678901234&lt;/p&gt; &lt;p&gt;- Se for um Passaporte informar &amp;quot;PASSPORT&amp;#60;número do passaporte com até 25 posições&amp;#62;. Ex:PASSPORTC12345678.&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;RUC (Referência Única da Carga) / UCR (Unique Consignment Reference)&lt;/strong&gt;&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;th&gt;Valor&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Country code&lt;/td&gt;&lt;td&gt;MasterConsignment /  IncludedHouseConsignment / IncludedCustomNote / CountryID&lt;/td&gt;&lt;td&gt;informar &amp;quot;BR&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Information identifier&lt;/td&gt;&lt;td&gt;MasterConsignment/  IncludedHouseConsignment / IncludedCustomNote / SubjectCode&lt;/td&gt;&lt;td&gt;informar &amp;quot;IMP&amp;quot;  - importação&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedHouseConsignment / IncludedCustomNote / ContentCode&lt;/td&gt;&lt;td&gt;informar &amp;quot;U&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Supplementary Customs, Security and Regulatory Control Information&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedHouseConsignment / IncludedCustomNote / Content&lt;/td&gt;&lt;td&gt;informar UCR&amp;#60;número da RUC com até 32 posições&amp;#62;. Ex: UCR8BR167017161001713D0000000000004021&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;Obs&lt;/strong&gt;: Caso a informação da RUC não seja encaminhada no arquivo, o sistema gera automaticamente um número para a carga. Se a RUC for informada, deverá atender a recomendação da Organização Mundial de Aduanas (OMA) para a Unique Consignment Reference (UCR).&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Código do Recinto Aduaneiro de Destino da Carga&lt;/strong&gt;&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;th&gt;Valor&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Country code&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedHouseConsignment / IncludedCustomNote / CountryID&lt;/td&gt;&lt;td&gt;informar &amp;quot;BR&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Information identifier&lt;/td&gt;&lt;td&gt;MasterConsignment/ IncludedHouseConsignment / IncludedCustomNote / SubjectCode&lt;/td&gt;&lt;td&gt;informar &amp;quot;CCL&amp;quot; - Cargo Control Location&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedHouseConsignment / IncludedCustomNote / ContentCode&lt;/td&gt;&lt;td&gt;informar &amp;quot;M&amp;quot; - Movement Reference Number&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Other Customs, Security and Regulatory Control Information / Supplementary Customs, Security and Regulatory Control Information&lt;/td&gt;&lt;td&gt;MasterConsignment / IncludedHouseConsignment / IncludedCustomNote / Content&lt;/td&gt;&lt;td&gt;informar &amp;quot;CUSTOMSWAREHOUSE&amp;#60;número do Código do Recinto Aduaneiro de Destino da Carga com X dígitos&amp;#62;&amp;quot;.  Ex:CUSTOMSWAREHOUSE1234567&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Todas as informações de data no arquivo devem ser encaminhadas com o fuso horário no padrão &lt;strong&gt;&amp;quot;YYYY-MM-DD&amp;#39;T&amp;#39;HH:mm:ss:SSS(‘+’/’-’)ZZ:ZZ&amp;quot;&lt;/strong&gt;.&lt;/p&gt;&lt;p&gt;A informação do fuso horário de partida ou chegada da aeronave refere-se ao fuso horário local. A data de criação do arquivo deverá ser informada com o fuso do local onde foi criado.&lt;/p&gt;&lt;h4 id&#x3D;\&quot;par-metros-de-entrada-\&quot;&gt;Parâmetros de Entrada:&lt;/h4&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Nome&lt;/th&gt;&lt;th&gt;Descrição&lt;/th&gt;&lt;th&gt;Tipo&lt;/th&gt;&lt;th&gt;Local&lt;/th&gt;&lt;th&gt;Detalhes&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Arquivo de conhecimento de carga (XFZB)&lt;/td&gt;&lt;td&gt;Conhecimentos de carga &lt;em&gt;House&lt;/em&gt;(HAWB)&lt;/td&gt;&lt;td&gt;Arquivo XML &lt;strong&gt;obrigatório&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;Body&lt;/td&gt;&lt;td&gt;Versão 3.00 da IATA - informado pelos Agentes de Carga ou pelo Operador de Remessa Postal / Expressa&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;cnpj&lt;/td&gt;&lt;td&gt;CNPJ do Agente de Carga ou do Operador de Remessa Postal / Expressa&lt;/td&gt;&lt;td&gt;Numérico(14) &lt;strong&gt;obrigatório&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;query param&lt;/td&gt;&lt;td&gt;CNPJ (formato 99999999999999)&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h4 id&#x3D;\&quot;resposta-\&quot;&gt;Resposta :&lt;/h4&gt;&lt;p&gt;Os serviços de recebimento de arquivos terão o retorno de processamento por arquivo XFNM na versão 3.00, com as seguintes informações:&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;th&gt;Valor&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Message Reference ID&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / ID&lt;/td&gt;&lt;td&gt;Fixo &amp;quot;BRCUSTOMS&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Message Name&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / Name&lt;/td&gt;&lt;td&gt;Fixo &amp;quot;Response&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Message Type&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / TypeCode&lt;/td&gt;&lt;td&gt;Fixo &amp;quot;294&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Message Date / Time Stamp&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / IssueDateTime&lt;/td&gt;&lt;td&gt;Data / hora de processamento do arquivo - UTC time&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Message Function&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / PurposeCode&lt;/td&gt;&lt;td&gt;Fixo &amp;quot;Response&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Message Version&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / VersionID&lt;/td&gt;&lt;td&gt;Fixo &amp;quot;3.0&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Sender Qualifier&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / SenderParty / schemeID&lt;/td&gt;&lt;td&gt;Fixo &amp;quot;C&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Sender Identification&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / SenderParty / PrimaryID&lt;/td&gt;&lt;td&gt;Fixo &amp;quot;BRCUSTOMS&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Recipient Qualifier&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / RecipientParty / schemeID&lt;/td&gt;&lt;td&gt;Valor do campo Sender Qualifier (tag  MessageHeaderDocument / SenderParty / schemeID)  do arquivo recebido. Caso não seja passível de identificação ou for inválido ou não vier preenchido, será preenchido com “O’ (letra O)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Recipient Identification&lt;/td&gt;&lt;td&gt;MessageHeaderDocument / RecipientParty / PrimaryID&lt;/td&gt;&lt;td&gt;Valor do campo Sender Identification (tag MessageHeaderDocument / SenderParty / PrimaryID) do arquivo recebido. Caso não seja passível de identificação ou for inválido ou não vier preenchido, será preenchido com &amp;quot;NOT IDENTIFIED&amp;quot;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Message Type&lt;/td&gt;&lt;td&gt;BusinessHeaderDocument / TypeCode&lt;/td&gt;&lt;td&gt;Valor do campo Message Type (tag MessageHeaderDocument / TypeCode) do arquivo original. Caso este campo não seja passível de identificação ou for inválido ou não vier preenchido,  será preenchido com 999.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Message Name&lt;/td&gt;&lt;td&gt;BusinessHeaderDocument / Name&lt;/td&gt;&lt;td&gt;Valor do campo Message Name (tag MessageHeaderDocument / Name) do arquivo original. Caso este campo não seja passível de identificação ou for inválido ou não vier preenchido, será preenchido com &amp;quot;NOT IDENTIFIED&amp;quot;.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Original Document Identification&lt;/td&gt;&lt;td&gt;BusinessHeaderDocument / ID&lt;/td&gt;&lt;td&gt;Valor do campo Message Reference ID (tag MessageHeaderDocument / ID) do arquivo original. Caso este campo não seja passível de identificação ou for inválido  ou não vier preenchido, será preenchido com &amp;quot;NOT IDENTIFIED&amp;quot;.&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Response Type&lt;/td&gt;&lt;td&gt;BusinessHeaderDocument / StatusCode&lt;/td&gt;&lt;td&gt;“&lt;em&gt;Received&lt;/em&gt;” , “&lt;em&gt;Rejected&lt;/em&gt;” ou “&lt;em&gt;Processed&lt;/em&gt;” – conforme processamento do arquivo. Na versão atual, haverá resposta apenas nas situações “&lt;em&gt;Received&lt;/em&gt;” (arquivo recebido e será processado) ou “&lt;em&gt;Rejected&lt;/em&gt;”(arquivo foi rejeitado)&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Os arquivos que passarem pela validação do XSD (formato estabelecido pela IATA), receberão status “Received”, acompanhado do número de protocolo gerado para este arquivo. Este número de protocolo pode ser utilizado para verificar a situação de processamento do arquivo por meio dos serviços “Consultar Situação de Arquivos por Data” ou “Consultar Situação de Arquivos por número de Protocolo”.&lt;/p&gt;&lt;p&gt;Já os arquivos que não passarem pela validação do XSD (formato estabelecido pela IATA) receberão status “Rejected”, acompanhado da lista de erros encontrados.&lt;/p&gt;&lt;p&gt;Para arquivos com o campo Response Type igual a “&lt;em&gt;Received&lt;/em&gt;”, haverá somente um registro do bloco de dados Response Status, conforme abaixo. O campo &amp;quot;Text&amp;quot; terá tamanho de 5000 caracteres, diferentemente do padrão estabelecido pela IATA.&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;th&gt;Valor&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Category&lt;/td&gt;&lt;td&gt;ResponseStatus / ConditionCode&lt;/td&gt;&lt;td&gt;Acknowledgement&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Text&lt;/td&gt;&lt;td&gt;ResponseStatus / Reason&lt;/td&gt;&lt;td&gt;Número do protocolo de recebimento&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Para arquivos com o campo Response Type igual a “&lt;em&gt;Rejected&lt;/em&gt;”, cada ocorrência de erro conterá as seguintes informações no bloco de dados Response Status. O campo &amp;quot;Text&amp;quot; terá tamanho de 5000 caracteres, diferentemente do padrão estabelecido pela IATA.&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Campo&lt;/th&gt;&lt;th&gt;Tag XML&lt;/th&gt;&lt;th&gt;Valor&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Category&lt;/td&gt;&lt;td&gt;ResponseStatus / ConditionCode&lt;/td&gt;&lt;td&gt;Error&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Text&lt;/td&gt;&lt;td&gt;ResponseStatus / Reason&lt;/td&gt;&lt;td&gt;Texto contendo a linha e coluna com erro, (informando Row:&amp;#60;número da linha&amp;#62; &amp;#124; Column:&amp;#60;número da coluna&amp;#62;) e a descrição do erro verificada.Tamanho do campo: 5000 posições. Ex: &amp;quot;Row:7&amp;#124;Column:20&amp;#124;Error: cvc-complex-type.2.4.a: Invalid content was found starting with element &amp;#39;{&amp;quot;iata:datamodel:3&amp;quot;:PurposeCode}&amp;#39;. One of &amp;#39;{&amp;quot;iata:datamodel:3&amp;quot;:IssueDateTime}&amp;#39; is expected.&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
     *
     */
    @POST
    @Path("/ext/incoming/xfzb")
    @Consumes({ "application/xml" })
    @Produces({ "application/xml" })
    @ApiOperation(value = "Informar Conhecimento de Carga House - XFZB (House Air Waybill)", notes = "<p>Encaminhamento de arquivo XML para processamento de conhecimentos de cargas house (HAWB - <em>House Air Waybill</em>). Será permitida apenas uma mensagem XFZB por arquivo, contendo a operação de <em>Creation</em>, <em>Update</em> ou <em>Deletion</em>, conforme o padrão IATA.<p>Os arquivos de operação Update ou Deletion serão processados, caso exista um arquivo de Creation recebido anteriormente com sucesso no sistema, tendo a mesma identificação do conhecimento de carga do HAWB. A identificação do conhecimento de carga HAWB é feita pelo conjunto da informação de número do HAWB (HouseWaybill/BusinessHeaderDocument/ID) e aeroporto de origem da carga do HAWB (HouseWaybill/MasterConsignment/IncludedHouseConsignment/OriginLocation/ID).</p><p>Para que um HAWB seja considerado associado a um MAWB(XFWB), deve haver arquivo de associação MAWB/HAWB(XFHL), que referencie o HAWB (XFZB), por meio de suas respectivas identificações do MAWB/HAWB e aeroporto de origem da carga. Além disso, todos os arquivos (XFHL, XFWB e XFZB) devem se encontrar na situação &quot;<em>Processed</em>&quot;.</p><p>Um arquivo XFZB que está sendo enviado com a operação Creation pode ser encaminhado por este serviço a qualquer momento, inclusive após a chegada da aeronave. Já um arquivo que tenha a operação Update ou Deletion, somente será aceito pelo serviço até a informação da chegada da aeronave e caso a carga não esteja vinculada a um documento de saída. No caso da exclusão, esta operação também não será permitida caso o HAWB já esteja vinculado a seu MAWB, conforme a regra de associação acima mencionada. Nessas situações, as operações de retificação ou exclusão somente poderão ser realizadas por funcionalidades de tela (web) a serem disponibilizadas futuramente, e não mais por arquivo XML. A funcionalidade de exclusão será restrita para uso da RFB.</p><p>Os valores totais de HAWB a serem informados, serão obrigatórios somente com relação ao valor de face (<strong>&quot;F&quot;</strong>).</p><p>De acordo com a necessidade da Receita Federal do Brasil, os campos abaixo são de informação obrigatória. Caso o arquivo não apresente as informações a seguir, ele será rejeitado em tempo de processamento.</p><p><strong>Número Total de Volumes</strong></p><table><thead><tr><th>Campo</th><th>Tag XML</th></tr></thead><tbody><tr><td>HOUSE WAYBILL SUMMARY /Total number of pieces</td><td>HouseWaybill / MasterConsignment / IncludedHouseConsignment  / TotalPieceQuantity</td></tr></tbody></table><p><strong>Peso Bruto Total</strong></p><table><thead><tr><th>Campo</th><th>Tag XML</th></tr></thead><tbody><tr><td>HOUSE WAYBILL SUMMARY / Total Gross Weight</td><td>HouseWaybill / MasterConsignment / IncludedHouseConsignment / IncludedTareGrossWeightMeasure</td></tr></tbody></table><p><strong>Peso Bruto Total - Unidade de Medida</strong></p><table><thead><tr><th>Campo</th><th>Tag XML</th></tr></thead><tbody><tr><td>HOUSE WAYBILL SUMMARY / Total Gross Weight</td><td>HouseWaybill / MasterConsignment / IncludedHouseConsignment / IncludedTareGrossWeightMeasure (unit code)</td></tr></tbody></table><p><strong>Descrição das Mercadorias</strong></p><table><thead><tr><th>Campo</th><th>Tag XML</th></tr></thead><tbody><tr><td>HOUSE WAYBILL SUMMARY / Description of Goods</td><td>HouseWaybill / MasterConsignment / IncludedHouseConsignment / SummaryDescription</td></tr></tbody></table><p><strong>Valor Total do Frete PREPAID</strong></p><table><thead><tr><th>Campo</th><th>Tag XML</th></tr></thead><tbody><tr><td>HOUSE WAYBILL SUMMARY / House Waybill Totals / Total Prepaid Charge Summary Amount</td><td>HouseWaybill / MasterConsignment / IncludedHouseConsignment / TotalPrepaidChargeAmount</td></tr></tbody></table><p><strong>Valor Total do Frete COLLECT</strong></p><table><thead><tr><th>Campo</th><th>Tag XML</th></tr></thead><tbody><tr><td>HOUSE WAYBILL SUMMARY / House Waybill Totals / Total Collect Charge Summary Amount</td><td>HouseWaybill / MasterConsignment / IncludedHouseConsignment / TotalCollectChargeAmount</td></tr></tbody></table><p>A informação de identificação do consignatário não é obrigatória, porém, caso a mesma não conste do HAWB no momento da chegada da viagem, o sistema realizará um bloqueio automático na carga.</p><p>De acordo com a necessidade da Receita Federal do Brasil, existem informações que poderão ser registradas no bloco de dados \"Other Customs Informations\", não sendo obrigatórias nas versões iniciais.</p><p>São elas:</p><p><strong>Indicador de Presença de Partes e Peças de Madeira Maciça</strong></p><table><thead><tr><th>Campo</th><th>Tag XML</th><th>Valor</th></tr></thead><tbody><tr><td>Other Customs, Security and Regulatory Control Information /Country code</td><td>MasterConsignment / IncludedCustomNote / CountryID</td><td>informar &quot;BR&quot;</td></tr><tr><td>Other Customs, Security and Regulatory Control Information / Information identifier</td><td>MasterConsignment / IncludedCustomNote / SubjectCode</td><td>Informar “OCI” - Other Custom Information</td></tr><tr><td>Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier</td><td>MasterConsignment / IncludedCustomNote / ContentCode</td><td>Informar “DI”</td></tr><tr><td>Other Customs, Security and Regulatory Control Information / Supplementary Customs, Security and Regulatory Control Information</td><td>MasterConsignment / IncludedCustomNote / Content</td><td>Informar &quot;WOODEN PARTS&quot;</td></tr></tbody></table><p><strong>Identificação do Consignatário</strong></p><table><thead><tr><th>Campo</th><th>Tag XML</th><th>Valor</th></tr></thead><tbody><tr><td>Other Customs, Security and Regulatory Control Information / Country code</td><td>MasterConsignment / IncludedHouseConsignment / IncludedCustomNote / CountryID</td><td>- informar &quot;BR&quot;</td></tr><tr><td>Other Customs, Security and Regulatory Control Information / Information identifier</td><td>MasterConsignment / IncludedHouseConsignment / IncludedCustomNote / SubjectCode</td><td>informar &quot;CNE&quot; consignatário</td></tr><tr><td>Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier</td><td>MasterConsignment / IncludedHouseConsignment / IncludedCustomNote / ContentCode</td><td>informar &quot;T&quot;</td></tr><tr><td>Other Customs, Security and Regulatory Control Information /Supplementary Customs, Security and Regulatory Control Information</td><td>MasterConsignment /  IncludedHouseConsignment / IncludedCustomNote / Content</td><td><p>- Se for um CPF informar &quot;CPF&#60;número do CPF com 11 dígitos&#62;&quot; . Ex: CPF12345678901</p> <p>- Se for um CNPJ informar &quot;CNPJ&#60;número do CNPJ com 8 ou 14 dígitos&#62;&quot;. Ex:CNPJ12345678901234</p> <p>- Se for um Passaporte informar &quot;PASSPORT&#60;número do passaporte com até 25 posições&#62;. Ex:PASSPORTC12345678.</p></td></tr></tbody></table><p><strong>RUC (Referência Única da Carga) / UCR (Unique Consignment Reference)</strong></p><table><thead><tr><th>Campo</th><th>Tag XML</th><th>Valor</th></tr></thead><tbody><tr><td>Other Customs, Security and Regulatory Control Information / Country code</td><td>MasterConsignment /  IncludedHouseConsignment / IncludedCustomNote / CountryID</td><td>informar &quot;BR&quot;</td></tr><tr><td>Other Customs, Security and Regulatory Control Information / Information identifier</td><td>MasterConsignment/  IncludedHouseConsignment / IncludedCustomNote / SubjectCode</td><td>informar &quot;IMP&quot;  - importação</td></tr><tr><td>Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier</td><td>MasterConsignment / IncludedHouseConsignment / IncludedCustomNote / ContentCode</td><td>informar &quot;U&quot;</td></tr><tr><td>Other Customs, Security and Regulatory Control Information / Supplementary Customs, Security and Regulatory Control Information</td><td>MasterConsignment / IncludedHouseConsignment / IncludedCustomNote / Content</td><td>informar UCR&#60;número da RUC com até 32 posições&#62;. Ex: UCR8BR167017161001713D0000000000004021</td></tr></tbody></table><p><strong>Obs</strong>: Caso a informação da RUC não seja encaminhada no arquivo, o sistema gera automaticamente um número para a carga. Se a RUC for informada, deverá atender a recomendação da Organização Mundial de Aduanas (OMA) para a Unique Consignment Reference (UCR).</p><p><strong>Código do Recinto Aduaneiro de Destino da Carga</strong></p><table><thead><tr><th>Campo</th><th>Tag XML</th><th>Valor</th></tr></thead><tbody><tr><td>Other Customs, Security and Regulatory Control Information / Country code</td><td>MasterConsignment / IncludedHouseConsignment / IncludedCustomNote / CountryID</td><td>informar &quot;BR&quot;</td></tr><tr><td>Other Customs, Security and Regulatory Control Information / Information identifier</td><td>MasterConsignment/ IncludedHouseConsignment / IncludedCustomNote / SubjectCode</td><td>informar &quot;CCL&quot; - Cargo Control Location</td></tr><tr><td>Other Customs, Security and Regulatory Control Information / Customs, Security and Regulatory Control Information Identifier</td><td>MasterConsignment / IncludedHouseConsignment / IncludedCustomNote / ContentCode</td><td>informar &quot;M&quot; - Movement Reference Number</td></tr><tr><td>Other Customs, Security and Regulatory Control Information / Supplementary Customs, Security and Regulatory Control Information</td><td>MasterConsignment / IncludedHouseConsignment / IncludedCustomNote / Content</td><td>informar &quot;CUSTOMSWAREHOUSE&#60;número do Código do Recinto Aduaneiro de Destino da Carga com X dígitos&#62;&quot;.  Ex:CUSTOMSWAREHOUSE1234567</td></tr></tbody></table><p>Todas as informações de data no arquivo devem ser encaminhadas com o fuso horário no padrão <strong>&quot;YYYY-MM-DD&#39;T&#39;HH:mm:ss:SSS(‘+’/’-’)ZZ:ZZ&quot;</strong>.</p><p>A informação do fuso horário de partida ou chegada da aeronave refere-se ao fuso horário local. A data de criação do arquivo deverá ser informada com o fuso do local onde foi criado.</p><h4 id=\"par-metros-de-entrada-\">Parâmetros de Entrada:</h4><table><thead><tr><th>Nome</th><th>Descrição</th><th>Tipo</th><th>Local</th><th>Detalhes</th></tr></thead><tbody><tr><td>Arquivo de conhecimento de carga (XFZB)</td><td>Conhecimentos de carga <em>House</em>(HAWB)</td><td>Arquivo XML <strong>obrigatório</strong></td><td>Body</td><td>Versão 3.00 da IATA - informado pelos Agentes de Carga ou pelo Operador de Remessa Postal / Expressa</td><td></td></tr><tr><td>cnpj</td><td>CNPJ do Agente de Carga ou do Operador de Remessa Postal / Expressa</td><td>Numérico(14) <strong>obrigatório</strong></td><td>query param</td><td>CNPJ (formato 99999999999999)</td><td></td></tr></tbody></table><h4 id=\"resposta-\">Resposta :</h4><p>Os serviços de recebimento de arquivos terão o retorno de processamento por arquivo XFNM na versão 3.00, com as seguintes informações:</p><table><thead><tr><th>Campo</th><th>Tag XML</th><th>Valor</th></tr></thead><tbody><tr><td>Message Reference ID</td><td>MessageHeaderDocument / ID</td><td>Fixo &quot;BRCUSTOMS&quot;</td></tr><tr><td>Message Name</td><td>MessageHeaderDocument / Name</td><td>Fixo &quot;Response&quot;</td></tr><tr><td>Message Type</td><td>MessageHeaderDocument / TypeCode</td><td>Fixo &quot;294&quot;</td></tr><tr><td>Message Date / Time Stamp</td><td>MessageHeaderDocument / IssueDateTime</td><td>Data / hora de processamento do arquivo - UTC time</td></tr><tr><td>Message Function</td><td>MessageHeaderDocument / PurposeCode</td><td>Fixo &quot;Response&quot;</td></tr><tr><td>Message Version</td><td>MessageHeaderDocument / VersionID</td><td>Fixo &quot;3.0&quot;</td></tr><tr><td>Sender Qualifier</td><td>MessageHeaderDocument / SenderParty / schemeID</td><td>Fixo &quot;C&quot;</td></tr><tr><td>Sender Identification</td><td>MessageHeaderDocument / SenderParty / PrimaryID</td><td>Fixo &quot;BRCUSTOMS&quot;</td></tr><tr><td>Recipient Qualifier</td><td>MessageHeaderDocument / RecipientParty / schemeID</td><td>Valor do campo Sender Qualifier (tag  MessageHeaderDocument / SenderParty / schemeID)  do arquivo recebido. Caso não seja passível de identificação ou for inválido ou não vier preenchido, será preenchido com “O’ (letra O)</td></tr><tr><td>Recipient Identification</td><td>MessageHeaderDocument / RecipientParty / PrimaryID</td><td>Valor do campo Sender Identification (tag MessageHeaderDocument / SenderParty / PrimaryID) do arquivo recebido. Caso não seja passível de identificação ou for inválido ou não vier preenchido, será preenchido com &quot;NOT IDENTIFIED&quot;</td></tr><tr><td>Message Type</td><td>BusinessHeaderDocument / TypeCode</td><td>Valor do campo Message Type (tag MessageHeaderDocument / TypeCode) do arquivo original. Caso este campo não seja passível de identificação ou for inválido ou não vier preenchido,  será preenchido com 999.</td></tr><tr><td>Message Name</td><td>BusinessHeaderDocument / Name</td><td>Valor do campo Message Name (tag MessageHeaderDocument / Name) do arquivo original. Caso este campo não seja passível de identificação ou for inválido ou não vier preenchido, será preenchido com &quot;NOT IDENTIFIED&quot;.</td></tr><tr><td>Original Document Identification</td><td>BusinessHeaderDocument / ID</td><td>Valor do campo Message Reference ID (tag MessageHeaderDocument / ID) do arquivo original. Caso este campo não seja passível de identificação ou for inválido  ou não vier preenchido, será preenchido com &quot;NOT IDENTIFIED&quot;.</td></tr><tr><td>Response Type</td><td>BusinessHeaderDocument / StatusCode</td><td>“<em>Received</em>” , “<em>Rejected</em>” ou “<em>Processed</em>” – conforme processamento do arquivo. Na versão atual, haverá resposta apenas nas situações “<em>Received</em>” (arquivo recebido e será processado) ou “<em>Rejected</em>”(arquivo foi rejeitado)</td></tr></tbody></table><p>Os arquivos que passarem pela validação do XSD (formato estabelecido pela IATA), receberão status “Received”, acompanhado do número de protocolo gerado para este arquivo. Este número de protocolo pode ser utilizado para verificar a situação de processamento do arquivo por meio dos serviços “Consultar Situação de Arquivos por Data” ou “Consultar Situação de Arquivos por número de Protocolo”.</p><p>Já os arquivos que não passarem pela validação do XSD (formato estabelecido pela IATA) receberão status “Rejected”, acompanhado da lista de erros encontrados.</p><p>Para arquivos com o campo Response Type igual a “<em>Received</em>”, haverá somente um registro do bloco de dados Response Status, conforme abaixo. O campo &quot;Text&quot; terá tamanho de 5000 caracteres, diferentemente do padrão estabelecido pela IATA.</p><table><thead><tr><th>Campo</th><th>Tag XML</th><th>Valor</th></tr></thead><tbody><tr><td>Category</td><td>ResponseStatus / ConditionCode</td><td>Acknowledgement</td></tr><tr><td>Text</td><td>ResponseStatus / Reason</td><td>Número do protocolo de recebimento</td></tr></tbody></table><p>Para arquivos com o campo Response Type igual a “<em>Rejected</em>”, cada ocorrência de erro conterá as seguintes informações no bloco de dados Response Status. O campo &quot;Text&quot; terá tamanho de 5000 caracteres, diferentemente do padrão estabelecido pela IATA.</p><table><thead><tr><th>Campo</th><th>Tag XML</th><th>Valor</th></tr></thead><tbody><tr><td>Category</td><td>ResponseStatus / ConditionCode</td><td>Error</td></tr><tr><td>Text</td><td>ResponseStatus / Reason</td><td>Texto contendo a linha e coluna com erro, (informando Row:&#60;número da linha&#62; &#124; Column:&#60;número da coluna&#62;) e a descrição do erro verificada.Tamanho do campo: 5000 posições. Ex: &quot;Row:7&#124;Column:20&#124;Error: cvc-complex-type.2.4.a: Invalid content was found starting with element &#39;{&quot;iata:datamodel:3&quot;:PurposeCode}&#39;. One of &#39;{&quot;iata:datamodel:3&quot;:IssueDateTime}&#39; is expected.</td></tr></tbody></table>", tags={ "Serviços de Envio de Arquivos" })
    @ApiResponses(value = { 
        @ApiResponse(code = 200, message = "Operação realizada com sucesso", response = String.class),
        @ApiResponse(code = 204, message = "Operação realizada com sucesso. Nenhum conteúdo retornado"),
        @ApiResponse(code = 400, message = "Requisição mal formatada"),
        @ApiResponse(code = 401, message = "Usuário não autenticado ou autenticação inválida"),
        @ApiResponse(code = 403, message = "Usuário não tem permissão de acesso ao recurso"),
        @ApiResponse(code = 404, message = "Recurso não encontrado"),
        @ApiResponse(code = 422, message = "Erro(s) de validação da camada de negócio"),
        @ApiResponse(code = 500, message = "Erro interno no servidor") })
    public Response doPost3(@QueryParam("TPP-ID") String TPP_ID, @HeaderParam("abi") String abi, @ApiParam(value = "" ,required=true)@Valid String body,  @NotNull @ApiParam(value = "CNPJ do Agente de Carga ou do Operador de Remessa Postal / Expressa  Tamanho: 14  Formato: NNNNNNNNNNNNNN",required=true)  @QueryParam("cnpj") String cnpj, @ApiParam(value = "JSON Web Token (JWT) contendo as informações do usuário. Este token é recuperado no parâmetro Set-Token no response da autenticação" ,required=true)@HeaderParam("Authorization") String authorization, @ApiParam(value = "Token de prevenção contra ataques CSRF. Este token é recuperado no parâmetro X-CSRF-Token no response da autenticação" ,required=true)@HeaderParam("X-CSRF-Token") String xCSRFToken);
}

